{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.html","./src/app/app.module.ts","./src/app/critters/CEditController.ts","./src/app/critters/CEditControllerBase.ts","./src/app/critters/CEditModel.ts","./src/app/critters/CTimeController.ts","./src/app/critters/CrittersView.ts","./src/app/critters/CrittersWorld.ts","./src/app/critters/ZeroTimeController.ts","./src/app/critters/critters-canvas/critters-canvas.component.ts","./src/app/critters/critters-canvas/critters-canvas.component.html","./src/app/critters/time-control-panel/time-control-panel.component.ts","./src/app/critters/time-control-panel/time-control-panel.component.html","./src/app/services/login.service.ts","./src/app/views/component-container.directive.ts","./src/app/views/login.component.ts","./src/app/views/login.component.html","./src/app/views/registration.component.ts","./src/app/views/registration.component.html","./src/app/views/sandbox.component.ts","./src/app/views/sandbox.component.html","./src/app/views/startpage.component.ts","./src/app/views/startpage.component.html","./src/app/views/wiki/article.component.ts","./src/app/views/wiki/article.component.html","./src/app/views/wiki/articles.component.ts","./src/app/views/wiki/articles.component.html","./src/app/views/wiki/edit.component.ts","./src/app/views/wiki/edit.component.html","./src/app/views/wiki/wiki.component.ts","./src/app/views/wiki/wiki.component.html","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { LoginComponent } from './views/login.component';\r\nimport { SandboxComponent } from './views/sandbox.component';\r\nimport { StartpageComponent } from './views/startpage.component';\r\nimport { ArticleComponent } from './views/wiki/article.component';\r\nimport { ArticlesComponent } from './views/wiki/articles.component';\r\nimport { EditArticleComponent } from './views/wiki/edit.component';\r\nimport { WikiComponent } from './views/wiki/wiki.component';\r\n\r\nconst routes: Routes = [\r\n    { path: '', redirectTo: 'home', pathMatch: 'full' },\r\n    { path: \"home\", component: StartpageComponent },\r\n    {\r\n        path: \"sandbox\",\r\n        component: SandboxComponent,\r\n        canDeactivate: [(sandBox: SandboxComponent) =>        \r\n            sandBox.exitConfirmRequired() ? window.confirm(sandBox.getExitConfirmText()): true\r\n        ]\r\n    },\r\n    {\r\n        path: \"wiki\", component: WikiComponent, \r\n        children: [\r\n            {\r\n                path: 'article/:id',\r\n                component: ArticleComponent,\r\n            },\r\n            {\r\n                path: 'edit/:id',\r\n                component: EditArticleComponent,\r\n                canDeactivate: [(editArt: EditArticleComponent) =>\r\n                    editArt.exitConfirmRequired() ? window.confirm(editArt.getExitConfirmText()) : true]\r\n            },\r\n            {\r\n                path: 'articles/:request',\r\n                component: ArticlesComponent\r\n            },\r\n        ],\r\n    },\r\n    { path: \"login\", component: LoginComponent },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes,\r\n        { useHash: true }\r\n    )],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: 'app.html' ,\r\n    styles: []\r\n})\r\nexport class AppComponent {\r\n  title = 'client';\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { SandboxComponent } from './views/sandbox.component';\r\nimport { StartpageComponent } from './views/startpage.component';\r\nimport { WikiComponent } from './views/wiki/wiki.component';\r\nimport { LoginComponent } from './views/login.component';\r\nimport { ComponentContainerDirective } from './views/component-container.directive';\r\nimport { RegistrationComponent } from './views/registration.component';\r\nimport { ArticleComponent } from './views/wiki/article.component';\r\nimport { ArticlesComponent } from './views/wiki/articles.component';\r\nimport { EditArticleComponent } from './views/wiki/edit.component';\r\nimport { CrittersCanvasComponent } from './critters/critters-canvas/critters-canvas.component';\r\nimport { TimeControlPanelComponent } from './critters/time-control-panel/time-control-panel.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,    \r\n    SandboxComponent,\r\n    StartpageComponent,\r\n    WikiComponent,\r\n    LoginComponent,\r\n    ComponentContainerDirective,\r\n    RegistrationComponent,\r\n    ArticleComponent,\r\n    ArticlesComponent,\r\n    EditArticleComponent,\r\n    CrittersCanvasComponent,\r\n    TimeControlPanelComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    HttpClientModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CEditControllerBase } from \"./CEditControllerBase\";\r\nimport { CEditModel } from \"./CEditModel\";\r\nimport { CPoint, CrittersWorld, WorldCangesType } from \"./CrittersWorld\";\r\n\r\n\r\n@Injectable()\r\nexport class CEditController extends CEditControllerBase {\r\n\r\n    constructor(private cWorld: CrittersWorld, private editModel: CEditModel) {  \r\n        super();\r\n        this.scrollRule = new ScrollRule(editModel);\r\n        this.editCellRule = new EditCellRule(cWorld, editModel);\r\n        this.wheelRule = new WheelRule(editModel);\r\n        this.touchScrollRule = new TouchScrollRule(cWorld, editModel);\r\n    }\r\n\r\n    scrollRule: ScrollRule;\r\n    editCellRule: EditCellRule;\r\n    wheelRule: WheelRule;\r\n    touchScrollRule: TouchScrollRule;\r\n\r\n    public override mouseDownHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.editCellRule.onMouseDown(event));            \r\n        changings.push(...this.scrollRule.onMouseDown(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public override mouseUpHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.editCellRule.onMouseUp(event));       \r\n        changings.push(...this.scrollRule.onMouseUp(event));        \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public override mouseMoveHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.scrollRule.onMouseMove(event));        \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n\r\n    public override touchStartHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.touchScrollRule.onTouchStart(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public override touchEndHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.touchScrollRule.onTouchEnd(event));            \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public override touchMoveHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.touchScrollRule.onTouchMove(event));            \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public override mouseWheelHandler(event: any) {        \r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.wheelRule.onWheel(event));            \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n    \r\n}\r\n\r\nclass ScrollRule {\r\n    constructor(private editModel: CEditModel) {\r\n    }\r\n\r\n    startPos: CPoint | undefined = undefined;\r\n    startFramePos: CPoint | undefined = undefined;\r\n\r\n    onMouseDown(event: any): WorldCangesType[] {\r\n        this.startPos = new CPoint(event.offsetX, event.offsetY);\r\n        this.startFramePos = this.editModel.GetFramePos();\r\n        return [];\r\n    } \r\n\r\n    onMouseUp(event: any): WorldCangesType[] {\r\n        if (this.startPos != undefined) {\r\n            let curPos = new CPoint(event.offsetX, event.offsetY);\r\n            this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos.X - this.startPos!.X);\r\n            this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos.Y - this.startPos!.Y);\r\n            this.startPos = undefined;\r\n            return [WorldCangesType.frameChanging];\r\n        }\r\n        return [];\r\n    }\r\n\r\n    onMouseMove(event: any): WorldCangesType[] {\r\n        if (this.startPos != undefined) {\r\n            let curPos = new CPoint(event.offsetX, event.offsetY);\r\n            this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos.X - this.startPos!.X);\r\n            this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos.Y - this.startPos!.Y);\r\n            return [WorldCangesType.frameChanging];\r\n        }\r\n        return [];\r\n    }\r\n}\r\n\r\nclass EditCellRule {\r\n\r\n    constructor(private cWorld: CrittersWorld, private editModel: CEditModel) {\r\n    }        \r\n\r\n    startPos: CPoint | undefined = undefined;\r\n\r\n    onMouseDown(event: any): WorldCangesType[] {\r\n        this.startPos = new CPoint(event.offsetX, event.offsetY);\r\n        return [];\r\n    }\r\n\r\n    onMouseUp(event: any): WorldCangesType[] {\r\n        let modified = false;\r\n        if (this.startPos != undefined) {\r\n            let endCell = this.editModel.CellXYInScr(event.offsetX, event.offsetY);\r\n            if (Math.abs(this.startPos.X - event.offsetX) < 2 && Math.abs(this.startPos.Y - event.offsetY) < 2) {\r\n                if (this.cWorld.GetCell(endCell.X, endCell.Y) === undefined)\r\n                    this.cWorld.AddCell(endCell.X, endCell.Y);\r\n                else\r\n                    this.cWorld.ClearCell(endCell.X, endCell.Y);\r\n                modified = true;\r\n            }\r\n            this.startPos = undefined;\r\n        }\r\n        return modified ? [WorldCangesType.cellsEditing]: [];\r\n    }\r\n\r\n}\r\n\r\nclass WheelRule {\r\n    constructor(private editModel: CEditModel) {\r\n    }\r\n\r\n    startPos: CPoint | undefined = undefined;\r\n    startFramePos: CPoint | undefined = undefined;\r\n\r\n    onWheel(event: any): WorldCangesType[] {\r\n        console.log(event);\r\n        let mouseX0 = this.editModel.ScrXToCell(event.offsetX);\r\n        let mouseY0 = this.editModel.ScrYToCell(event.offsetY);\r\n        this.editModel.scale = this.editModel.scale * Math.pow(1.1, -event.deltaY / 120);\r\n        let mouseX = this.editModel.ScrXToCell(event.offsetX);\r\n        let mouseY = this.editModel.ScrYToCell(event.offsetY);\r\n        this.editModel.X -= mouseX - mouseX0;\r\n        this.editModel.Y -= mouseY - mouseY0;\r\n        return [WorldCangesType.frameChanging];\r\n    }\r\n}\r\n\r\nclass TouchScrollRule {\r\n    constructor(private cWorld: CrittersWorld, private editModel: CEditModel) {\r\n    }\r\n\r\n    startPos1: CPoint | undefined = undefined;\r\n    startPos2: CPoint | undefined = undefined;\r\n    startFramePos: CPoint | undefined = undefined;\r\n    startScale: number = 1;\r\n\r\n    onTouchStart(event: any): WorldCangesType[] {\r\n        if (event.touches.length == 0)\r\n            return [];\r\n        var bcr = event.target.getBoundingClientRect();\r\n        this.startPos1 = new CPoint(event.touches[0].clientX - bcr.x, event.touches[0].clientY - bcr.y);\r\n        if (event.touches.length > 1) {\r\n            this.startPos2 = new CPoint(event.touches[1].clientX - bcr.x, event.touches[1].clientY - bcr.y);\r\n            this.startScale = this.editModel.scale;\r\n        }\r\n        this.startFramePos = this.editModel.GetFramePos();\r\n        return [];\r\n    }\r\n\r\n    onTouchEnd(event: any): WorldCangesType[] {\r\n        if (event.changedTouches.length == 0) {\r\n            this.startPos1 = undefined;\r\n            this.startPos2 = undefined;\r\n            return [];\r\n        }\r\n        if (event.changedTouches.length == 1) {\r\n            this.startPos2 = undefined;\r\n        }\r\n        if (this.startPos1 != undefined) {\r\n            var bcr = event.target.getBoundingClientRect();\r\n            let curPos = new CPoint(event.changedTouches[0].clientX - bcr.x, event.changedTouches[0].clientY - bcr.y);          \r\n            let endCell = this.editModel.CellXYInScr(curPos.X, curPos.Y);\r\n            if (event.changedTouches.length == 1 && Math.abs(this.startPos1.X - curPos.X) < 5 && Math.abs(this.startPos1.Y - curPos.Y) < 5) {\r\n                if (this.cWorld.GetCell(endCell.X, endCell.Y) === undefined)\r\n                    this.cWorld.AddCell(endCell.X, endCell.Y);\r\n                else\r\n                    this.cWorld.ClearCell(endCell.X, endCell.Y);\r\n                return [WorldCangesType.cellsEditing];\r\n            }\r\n            else {\r\n                this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos.X - this.startPos1!.X);\r\n                this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos.Y - this.startPos1!.Y);\r\n                this.startPos1 = undefined;\r\n                return [WorldCangesType.frameChanging];\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    onTouchMove(event: any): WorldCangesType[] {\r\n        if (event.changedTouches.length == 0) {\r\n            this.startPos1 = undefined;\r\n            this.startPos2 = undefined;\r\n            return [];\r\n        }\r\n        if (event.changedTouches.length == 1) {\r\n            this.startPos2 = undefined;\r\n        }\r\n        var bcr = event.target.getBoundingClientRect();\r\n        let curPos1 = new CPoint(event.touches[0].clientX - bcr.x, event.touches[0].clientY - bcr.y);\r\n        let curPos2: CPoint | undefined = undefined;\r\n        if (event.touches.length>1)\r\n            curPos2 = new CPoint(event.touches[1].clientX - bcr.x, event.touches[1].clientY - bcr.y);\r\n\r\n        if (this.startPos1 != undefined && this.startPos2 != undefined && curPos2 != undefined) {\r\n            this.editModel.scale = this.startScale / this.startPos1.dist(this.startPos2) * curPos1.dist(curPos2);\r\n        }\r\n        if (this.startPos1 != undefined) {\r\n            this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos1.X - this.startPos1!.X);\r\n            this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos1.Y - this.startPos1!.Y);\r\n            return [WorldCangesType.frameChanging];\r\n        }\r\n        return [];\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable()\r\nexport class CEditControllerBase {\r\n    constructor() {\r\n    }\r\n\r\n    public mouseDownHandler(event: any) {\r\n    }\r\n\r\n    public mouseUpHandler(event: any) {\r\n    }\r\n\r\n    public mouseMoveHandler(event: any) {\r\n    }    \r\n\r\n    public mouseWheelHandler(event: any) {\r\n    }    \r\n\r\n    public touchStartHandler(event: any) {\r\n    }\r\n\r\n    public touchEndHandler(event: any) {\r\n    }\r\n\r\n    public touchMoveHandler(event: any) {\r\n    }\r\n\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject } from \"rxjs\";\r\nimport { CPoint } from \"./CrittersWorld\";\r\n\r\n@Injectable()\r\nexport class CEditModel {\r\n\r\n    scale: number = 10;\r\n    X: number = 0;\r\n    Y: number = 0;\r\n    gridActual: boolean = false;    \r\n\r\n    changesSubject: Subject<number> = new Subject();\r\n\r\n    public subscribeToChanges(next: (value: number) => void) {\r\n        this.changesSubject.subscribe(next);\r\n    }\r\n\r\n    CellXToScr(x: number): number {\r\n        return (x - this.X) * this.scale;\r\n    }\r\n\r\n    CellYToScr(y: number): number {\r\n        return (y - this.Y) * this.scale;\r\n    }\r\n\r\n    CelldXToScr(dx: number) {\r\n        return dx * this.scale;\r\n    }\r\n\r\n    CelldYToScr(dy: number) {\r\n        return dy * this.scale;\r\n    }\r\n\r\n    ScrXToCell(x: number) {\r\n        return this.X + x / this.scale;\r\n    }\r\n\r\n    ScrYToCell(y: number) {\r\n        return this.Y + y / this.scale;\r\n    }\r\n\r\n    ScrdXToCell(x: number) {\r\n        return x / this.scale;\r\n    }\r\n\r\n    ScrdYToCell(y: number) {\r\n        return y / this.scale;\r\n    }\r\n\r\n    CellXYInScr(x: number, y: number): CPoint {\r\n        return new CPoint(Math.floor(this.ScrXToCell(x)), Math.floor(this.ScrYToCell(y)));\r\n    }\r\n\r\n    GetFramePos(): CPoint {\r\n        return new CPoint(this.X, this.Y)\r\n    }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CrittersWorld, WorldCangesType } from \"./CrittersWorld\";\r\n\r\n@Injectable()\r\nexport class CTimeController {\r\n    constructor(private world: CrittersWorld) {\r\n    }\r\n\r\n    speed: number = 0;\r\n    timeForward: boolean = true;\r\n    execTimer: NodeJS.Timeout | undefined = undefined;\r\n\r\n    public step() {\r\n        this.world.RunSerie(1);\r\n        this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n        this.toOddStep();\r\n    }\r\n\r\n    public setSpeed(speed: number) {\r\n        this.speed = speed;\r\n        if (this.execTimer)\r\n            clearTimeout(this.execTimer);\r\n        this.stepOnTimer();                          \r\n        if (this.speed == 0)\r\n            this.toOddStep();\r\n    }\r\n\r\n    private stepOnTimer() {\r\n        if (this.speed != 0) {\r\n            this.world.RunSerie(1);            \r\n            this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n            if (!this.world.IsZeroTime())\r\n                this.execTimer = setTimeout(() => this.stepOnTimer(), 1 / this.speed * 1000);\r\n            else {\r\n                this.speed = 0;\r\n                if (this.onZeroStateCallback)\r\n                    this.onZeroStateCallback();\r\n            }\r\n        }\r\n        else {\r\n            if (this.execTimer)\r\n                clearTimeout(this.execTimer);\r\n            this.execTimer = undefined;\r\n        }            \r\n    }   \r\n\r\n    private toOddStep() {        \r\n        if (this.world.IsEvenStep())\r\n            setTimeout(() =>\r\n            {                \r\n                if (this.world.IsEvenStep()) {\r\n                    this.world.RunSerie(1);\r\n                    this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n                }\r\n            }, 500);    \r\n    }\r\n\r\n    public setTimeDirection(forward: boolean) {\r\n        if (this.timeForward != forward)\r\n            this.timeForward = forward;\r\n        if (this.world.isForwardTimeDirection() != forward) {\r\n            this.world.ReverseTimeDirection();\r\n            this.toOddStep();\r\n        }        \r\n    }    \r\n\r\n    onZeroStateCallback!: () => void;\r\n\r\n    onZeroState(cb: () => void) {\r\n        this.onZeroStateCallback = cb;\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CEditModel } from \"./CEditModel\";\r\nimport { CrittersWorld } from \"./CrittersWorld\";\r\n\r\n@Injectable()\r\nexport class CrittersView {\r\n    public constructor(private world: CrittersWorld, private editModel: CEditModel) {        \r\n    }\r\n    \r\n    paint(canvas: HTMLCanvasElement) {\r\n        let ctx = canvas.getContext('2d');\r\n        ctx!.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx!.canvas.width = ctx!.canvas.clientWidth;\r\n        ctx!.canvas.height = ctx!.canvas.clientHeight;\r\n        this.PaintGrid(ctx!);\r\n\r\n        ctx!.fillStyle = \"green\";\r\n        for (let c of this.world.getCells()) {            \r\n            let x = this.editModel.CellXToScr(c.x);\r\n            let y = this.editModel.CellYToScr(c.y);\r\n            if (x < canvas.width && x > 0 - this.editModel.scale\r\n                && y > 0 - this.editModel.scale && y < canvas.height) {\r\n                ctx!.fillRect(x, y, this.editModel.scale, this.editModel.scale);\r\n            }            \r\n        }\r\n    }\r\n\r\n    PaintGrid(ctx: CanvasRenderingContext2D) {\r\n        let x0 = Math.floor(this.editModel.ScrXToCell(0)/2)*2 - 3;\r\n        let x1 = Math.floor(this.editModel.ScrXToCell(ctx!.canvas.width)/2)*2 + 3;\r\n        ctx.strokeStyle = 'rgba(100, 100, 100, 0.5)';\r\n        for (let x = x0; x <= x1; x = x + 2) {\r\n            ctx.beginPath();\r\n            let xs = this.editModel.CellXToScr(x);\r\n            ctx.moveTo(xs, 0);\r\n            ctx.lineTo(xs, ctx!.canvas.height);\r\n            ctx.stroke();\r\n        }            \r\n        ctx.strokeStyle = 'rgba(100, 100, 100, 0.2)';\r\n        for (let x = x0-1; x <= x1; x = x + 2) {\r\n            ctx.beginPath();\r\n            let xs = this.editModel.CellXToScr(x);\r\n            ctx.moveTo(xs, 0);\r\n            ctx.lineTo(xs, ctx!.canvas.height);\r\n            ctx.stroke();\r\n        }            \r\n        let y0 = Math.floor(this.editModel.ScrYToCell(0)/2)*2 - 3;\r\n        let y1 = Math.floor(this.editModel.ScrYToCell(ctx!.canvas.height)/2)*2 + 3;\r\n        ctx.strokeStyle = 'rgba(100, 100, 100, 0.5)';\r\n        for (let y = y0; y <= y1; y = y + 2) {\r\n            ctx.beginPath();\r\n            let ys = this.editModel.CellYToScr(y);\r\n            ctx.moveTo(0, ys);\r\n            ctx.lineTo(ctx!.canvas.width, ys);\r\n            ctx.stroke();\r\n        }\r\n        ctx.strokeStyle = 'rgba(100, 100, 100, 0.2)';\r\n        for (let y = y0 - 1; y <= y1; y = y + 2) {\r\n            ctx.beginPath();\r\n            let ys = this.editModel.CellYToScr(y);\r\n            ctx.moveTo(0, ys);\r\n            ctx.lineTo(ctx!.canvas.width, ys);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n// на входе получает провайдер canvas, мир, модель отображения, модель редактирования;\r\n// по команде извне рисует на канвасе мир, согласно модели отображения и добавляет модель редактирования;\r\n// остальную логику выполняют контроллеры\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject, timeInterval } from \"rxjs\";\r\nimport { CWorldSnapshot } from \"./CWorldSnapshot\";\r\n\r\n\r\n@Injectable()\r\nexport class CrittersWorld {\r\n    constructor() {\r\n    }\r\n\r\n    private cells: Map<number, Cell> = new Map<number, Cell>();    \r\n\r\n    private stepNum: number = 1;\r\n    private forward: boolean = true;\r\n    private modified: boolean = false;\r\n\r\n    private nextCellKey: number = 0;\r\n    \r\n    private changesSubject: Subject<WorldCangesType[]> = new Subject();    \r\n\r\n    public AddCell(x: number, y: number): Cell {\r\n        let key = x * Cell.KEY_GEN_FACTOR + y;\r\n        let resultCell = new Cell(this.NextCellKey(), x, y, this.stepNum);\r\n        this.cells.set(key, resultCell);\r\n        return resultCell;\r\n    }\r\n\r\n    public getCells(): IterableIterator<Cell> {\r\n        return this.cells.values();\r\n    }\r\n\r\n    private NextCellKey(): number {\r\n        this.nextCellKey++;\r\n        return this.nextCellKey;\r\n    }\r\n\r\n    public notifyAboutChanges(changeTypes: WorldCangesType[]) {\r\n        if (changeTypes.includes(WorldCangesType.cellsEditing))\r\n            this.modified = true;\r\n        this.changesSubject.next(changeTypes);\r\n    }\r\n\r\n    public resetModificationFlag() {\r\n        this.modified = false;\r\n    }\r\n\r\n    public wasModified(): boolean {\r\n        return this.modified;\r\n    }\r\n\r\n    public subscribeToChanges(next: (value: WorldCangesType[]) => void) {\r\n        this.changesSubject.subscribe(next);\r\n    }\r\n            \r\n    // Очистить клетку, если занята        \r\n    public ClearCell(x: number, y: number) {\r\n        let key = x * Cell.KEY_GEN_FACTOR + y;\r\n        let c = this.cells.get(key);\r\n        if (c)\r\n            this.RemoveCell(key, c);\r\n    }\r\n\r\n    private RemoveCell(key: number, cl: Cell) {\r\n        this.cells.delete(key);\r\n    }\r\n\r\n\r\n    public IsEvenStep(): boolean {\r\n        return this.stepNum % 2 == 0;\r\n    }\r\n\r\n    public RunSerie(stepCnt: number) {\r\n        for (let i = 0; i < stepCnt; i++)\r\n            this.Run();\r\n    }\r\n\r\n    public Clear() {\r\n        this.cells.clear();\r\n        this.nextCellKey = 0;\r\n        this.stepNum = 1;\r\n    }\r\n\r\n    public ReverseTimeDirection() {\r\n        if (this.forward)\r\n            this.stepNum--;\r\n        else\r\n            this.stepNum++;\r\n        this.forward = !this.forward;\r\n    }\r\n\r\n    public isForwardTimeDirection() {\r\n        return this.forward;\r\n    }\r\n\r\n    private Run() {\r\n        if (this.forward)\r\n            this.stepNum++;\r\n        else\r\n            this.stepNum--;\r\n        let evenStep = this.stepNum % 2 == 0;\r\n        for (let c_e of this.cells.entries()) {\r\n            let c = c_e[1];\r\n            if (c.prosessedStep != this.stepNum) {\r\n                let xc = c.x;\r\n                let yc = c.y;\r\n                    // позиция ячейки\r\n                let xgc = xc - (((xc % 2 == 0) == evenStep) ? 0 : 1);\r\n                let ygc = yc - (((yc % 2 == 0) == evenStep) ? 0 : 1);\r\n                // другие клетки в ячейке\r\n                let gc00: Cell | undefined;\r\n                let gc11: Cell | undefined;\r\n                let gc01: Cell | undefined;\r\n                let gc10: Cell | undefined;\r\n                let c00: boolean = false, c11: boolean = false, c01: boolean = false, c10: boolean = false;\r\n                gc00 = this.cells.get(xgc * Cell.KEY_GEN_FACTOR + ygc);\r\n                c00 = gc00 != undefined;\r\n                gc11 = this.cells.get((xgc + 1) * Cell.KEY_GEN_FACTOR + (ygc + 1));\r\n                c11 = gc11 != undefined;\r\n                gc01 = this.cells.get(xgc * Cell.KEY_GEN_FACTOR + (ygc + 1));\r\n                c01 = gc01 != undefined;\r\n                gc10 = this.cells.get((xgc + 1) * Cell.KEY_GEN_FACTOR + ygc);\r\n                c10 = gc10 != undefined;\r\n                // определить действие в зависимости от положения \r\n                let cellCnt = (gc00 == null ? 0 : 1) + (gc11 == null ? 0 : 1) + (gc01 == null ? 0 : 1) + (gc10 == null ? 0 : 1);\r\n                if (cellCnt == 1) {\r\n                    // это единственная ячейка - двигать на нечетных шагах по диагонали\r\n                    if (!evenStep) {\r\n                        if (xgc == xc)\r\n                            c.x++;\r\n                        else\r\n                            c.x--;\r\n                        if (ygc == yc)\r\n                            c.y++;\r\n                        else\r\n                            c.y--;\r\n                    }\r\n                }\r\n                else if (cellCnt == 2) {\r\n                    // две ячейки: 6 вариантов инверсии\r\n                    if (c00 && c00 == c11) {\r\n                        // 10\r\n                        // 01\r\n                        gc00!.x++;\r\n                        gc11!.x--;\r\n                    }\r\n                    else if (c01 && c01 == c10) {\r\n                        // 01\r\n                        // 10\r\n                        gc01!.x++;\r\n                        gc10!.x--;\r\n                        //gc01.y--;\r\n                        //gc10.y++;\r\n                    }\r\n                    else if (c00 && c00 == c10) {\r\n                        // 11\r\n                        // 00\r\n                        gc00!.y++;\r\n                        gc10!.y++;\r\n                    }\r\n                    else if (c01 && c01 == c11) {\r\n                        // 00\r\n                        // 11\r\n                        gc01!.y--;\r\n                        gc11!.y--;\r\n                    }\r\n                    else if (c00 && c00 == c01) {\r\n                        // 10\r\n                        // 10\r\n                        gc00!.x++;\r\n                        gc01!.x++;\r\n                    }\r\n                    else {\r\n                        // 01\r\n                        // 01\r\n                        gc10!.x--;\r\n                        gc11!.x--;\r\n                    }\r\n                }\r\n                else if (cellCnt == 3) {\r\n                    if (evenStep) {\r\n                        if (!c00) {\r\n                            gc11!.x--;\r\n                            gc11!.y--;\r\n                        }\r\n                        else if (!c11) {\r\n                            gc00!.x++;\r\n                            gc00!.y++;\r\n                        }\r\n                        else if (!c01) {\r\n                            gc10!.x--;\r\n                            gc10!.y++;\r\n                        }\r\n                        else {\r\n                            gc01!.x++;\r\n                            gc01!.y--;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (c00)\r\n                    gc00!.prosessedStep = this.stepNum;\r\n                if (c11)\r\n                    gc11!.prosessedStep = this.stepNum;\r\n                if (c01)\r\n                    gc01!.prosessedStep = this.stepNum;\r\n                if (c10)\r\n                    gc10!.prosessedStep = this.stepNum;\r\n            }\r\n        }\r\n        let cellsNew = new Map<number, Cell>();\r\n        for (let c_e of this.cells.entries()) {\r\n            let c = c_e[1];\r\n            cellsNew.set(c.x * Cell.KEY_GEN_FACTOR + c.y, c);\r\n        }\r\n        this.cells = cellsNew;        \r\n    }\r\n\r\n    public GetCellsCount(): number {\r\n        return this.cells.size;\r\n    }\r\n\r\n    public GetCell(x: number, y: number): Cell | undefined {        \r\n        return this.cells.get(x * Cell.KEY_GEN_FACTOR + y);\r\n    }\r\n\r\n    public FindInArea(rectangle: CRect): Cell[] {\r\n        let result: Cell[] = [];\r\n        for (let c of this.cells.entries()) {\r\n            let cell = c[1];\r\n            if (rectangle.ContainsInXY(cell.x, cell.y))\r\n                result.push(cell);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public DeleteCells(deleted: Cell[]) {        \r\n        for (let c of deleted) \r\n            this.cells.delete(c.GetKey());\r\n    }\r\n\r\n    public MoveCellsTo(cls: Cell[], dx: number, dy: number) {\r\n        /*foreach(var c in cls)\r\n        cells.Remove(c.GetKey());\r\n        foreach(var c in cls)\r\n        {\r\n            c.x += dx;\r\n            c.y += dy;\r\n        }\r\n        foreach(var c in cls)\r\n        cells.Add(c.GetKey(), c);*/\r\n    }\r\n\r\n    public SetThisTimeAsZero() {\r\n        if (this.stepNum == 1)\r\n            return;\r\n        this.stepNum = 1;\r\n        this.forward = true;\r\n        for (let c of this.cells.values())\r\n            c.prosessedStep = 1;\r\n    }\r\n\r\n    public IsZeroTime(): boolean {\r\n        return this.stepNum == 1;\r\n    }\r\n\r\n    public RunToZeroTime() {\r\n        if (!this.forward) {\r\n            this.ReverseTimeDirection();\r\n            if (this.IsEvenStep())\r\n                this.RunSerie(1);\r\n        }\r\n        if (this.stepNum == 1)\r\n            return;\r\n        let distToZero = Math.abs(this.stepNum - 1);        \r\n        if (this.stepNum > 1) \r\n            this.ReverseTimeDirection();\r\n         this.RunSerie(distToZero);\r\n         this.SetThisTimeAsZero();\r\n    }\r\n\r\n    public MakeSnapshot(): CWorldSnapshot {        \r\n        let resultCells: Cell[] = [];\r\n        for (let value of this.cells.values()) {\r\n            resultCells.push(value.Clone());\r\n        }        \r\n        return { cells: resultCells };\r\n    }\r\n\r\n    public LoadSnapshot(snapshot: CWorldSnapshot) {\r\n        this.Clear();\r\n        this.stepNum = 1;\r\n        this.forward = true;\r\n        for (let c of snapshot.cells) {\r\n            c.prosessedStep = this.stepNum;\r\n            this.cells.set(c.x * Cell.KEY_GEN_FACTOR + c.y, c.Clone());\r\n        }\r\n    }\r\n\r\n    public TestInit() {\r\n        this.AddCell(10, 10);\r\n        this.AddCell(11, 11);\r\n        this.AddCell(10, 11);\r\n        this.AddCell(12, 11);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CrittersWorldSerializer {\r\n\r\n    public SerializeCells(w: CrittersWorld): number[] {\r\n        let result = [];\r\n        for (let c of w.getCells()) {            \r\n            result.push(c.x);\r\n            result.push(c.y);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public DeserializeCells(cellsData: number[], cw: CrittersWorld) {        \r\n        for (let n = 0; n < cellsData.length; n=n+2) {\r\n            cw.AddCell(cellsData[n], cellsData[n + 1]);\r\n        }\r\n    }\r\n}\r\n\r\nexport class Cell {\r\n    public constructor(id: number, x: number, y: number, procStep: number) {\r\n        this.id = id;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.prosessedStep = procStep;\r\n    }\r\n\r\n    public static KEY_GEN_FACTOR = 1000000000;\r\n    \r\n    // Уникальный ключ    \r\n    public id: number;\r\n\r\n    public x: number;\r\n    public y: number;\r\n    public prosessedStep: number;\r\n \r\n    public GetKey(): number\r\n    {\r\n        return this.x * Cell.KEY_GEN_FACTOR + this.y;\r\n    }\r\n\r\n    public MoveTo(toX: number, toY: number)\r\n    {\r\n        this.x = toX;\r\n        this.y = toY;\r\n    }\r\n\r\n    public Clone(): Cell {\r\n        return new Cell(this.id, this.x, this.y, this.prosessedStep);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CRect {\r\n    public constructor(x: number, y: number, width: number, height: number) {\r\n        this.X = x;\r\n        this.Y = y;\r\n        this.Width = width;\r\n        this.Height = height;\r\n    }\r\n\r\n    public Width: number;\r\n    public Height: number;\r\n    public X: number;\r\n    public Y: number;\r\n\r\n    public GetTop(): number { return this.Y; }\r\n    public GetRight(): number { return this.X + this.Width; }\r\n    public GetLeft(): number { return this.X; }\r\n    public GetBottom(): number { return this.Y + this.Height; }\r\n\r\n    public ContainsInXY(x: number, y: number): boolean {\r\n        return x >= this.X && x < this.X + this.Width && y >= this.Y && y < this.Y + this.Height;\r\n    }\r\n\r\n    public Contains(p: CPoint): boolean {\r\n        return p.X >= this.X && p.X < this.X + this.Width && p.Y >= this.Y && p.Y < this.Y + this.Height;\r\n    }\r\n}\r\n\r\nexport class CPoint {\r\n    public constructor(x: number, y: number) {\r\n        this.X = x;\r\n        this.Y = y;\r\n    }\r\n    public X: number;\r\n    public Y: number;\r\n\r\n    public dist(p: CPoint) {\r\n        return Math.sqrt((this.X - p.X) * (this.X - p.X) + (this.Y - p.Y) * (this.Y - p.Y));\r\n    }\r\n\r\n}\r\n\r\nexport enum WorldCangesType {\r\n    cellsEditing,\r\n    frameChanging,\r\n    toolsChanging,\r\n    loaded,\r\n    executed\r\n}","import { Injectable } from \"@angular/core\";\r\nimport { timeInterval } from \"rxjs\";\r\nimport { CrittersWorld, WorldCangesType } from \"./CrittersWorld\";\r\nimport { CWorldSnapshot } from \"./CWorldSnapshot\";\r\n\r\n@Injectable()\r\nexport class ZeroTimeController {\r\n    constructor(private world: CrittersWorld) {\r\n        world.subscribeToChanges(ch => {\r\n            if (ch.includes(WorldCangesType.cellsEditing) && !world.IsZeroTime())\r\n                this.wasEditedAtNotZeroTime = true;\r\n            if (ch.includes(WorldCangesType.loaded))\r\n                this.wasEditedAtNotZeroTime = false;\r\n        });\r\n    }\r\n\r\n    snapshot: CWorldSnapshot | undefined;\r\n    wasEditedAtNotZeroTime: boolean = false;\r\n\r\n    public setThisTimeAsZero() {        \r\n        if (this.world.IsEvenStep())\r\n            return;\r\n        this.snapshot = this.world.MakeSnapshot();\r\n        this.world.SetThisTimeAsZero();\r\n        this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n    }\r\n\r\n    public goToZeroTime() {        \r\n        if (this.wasEditedAtNotZeroTime)\r\n            this.world.RunToZeroTime();\r\n        else if (this.snapshot)        \r\n            this.world.LoadSnapshot(this.snapshot);\r\n        this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n        this.wasEditedAtNotZeroTime = false;\r\n    }\r\n\r\n\r\n\r\n}","import { Component, OnInit } from '@angular/core';\r\nimport { CEditController } from '../CEditController';\r\nimport { CEditModel } from '../CEditModel';\r\nimport { CrittersView } from '../CrittersView';\r\nimport { CrittersWorld } from '../CrittersWorld';\r\n\r\n@Component({\r\n    selector: 'app-critters-canvas',\r\n    templateUrl: \"critters-canvas.component.html\",\r\n    styles: [\r\n    ]\r\n})\r\nexport class CrittersCanvasComponent implements OnInit {\r\n\r\n    constructor(private editController: CEditController, private crittersView: CrittersView,\r\n        private editModel: CEditModel, private crittersWorld: CrittersWorld) {\r\n    }\r\n\r\n    _canvas!: HTMLCanvasElement;\r\n\r\n    ngOnInit(): void {\r\n        this._canvas = document.getElementById(\"c_canvas\") as HTMLCanvasElement;\r\n        this.crittersWorld.subscribeToChanges((n) => this.crittersView.paint(this._canvas));\r\n        this.editModel.subscribeToChanges((n) => this.crittersView.paint(this._canvas));\r\n        this.crittersView.paint(this._canvas)\r\n    }\r\n\r\n    onResized(event: any) {\r\n        this.crittersView.paint(this._canvas);\r\n    }\r\n\r\n    onMouseDown(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseDownHandler(event);\r\n    }\r\n\r\n    onMouseUp(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseUpHandler(event);\r\n    }\r\n\r\n    onMouseMove(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseMoveHandler(event);\r\n    }\r\n\r\n    onMouseWheel(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseWheelHandler(event);\r\n    }\r\n\r\n    onTouchStart(event: any) {\r\n        event.preventDefault();\r\n        this.editController.touchStartHandler(event);\r\n    }\r\n\r\n    onTouchEnd(event: any) {\r\n        event.preventDefault();\r\n        this.editController.touchEndHandler(event);\r\n    }\r\n\r\n    onTouchMove(event: any) {\r\n        event.preventDefault();\r\n        this.editController.touchMoveHandler(event);\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n","<canvas id=\"c_canvas\" style=\"position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background-color: white\"        \r\n        (mousedown)=\"onMouseDown($event)\"\r\n        (mouseup)=\"onMouseUp($event)\"\r\n        (mousemove)=\"onMouseMove($event)\"\r\n        (wheel)=\"onMouseWheel($event)\"\r\n        (touchstart)=\"onTouchStart($event)\"\r\n        (touchend)=\"onTouchEnd($event)\"\r\n        (touchmove)=\"onTouchMove($event)\"\r\n        >\r\n</canvas>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CrittersWorld } from '../CrittersWorld';\r\nimport { CTimeController } from '../CTimeController';\r\nimport { ZeroTimeController } from '../ZeroTimeController';\r\n\r\n@Component({\r\n    selector: 'app-time-control-panel',\r\n    templateUrl: 'time-control-panel.component.html',\r\n    styleUrls: [\"time-control-panel.component.css\"]\r\n})\r\nexport class TimeControlPanelComponent implements OnInit {\r\n\r\n    constructor(private timeController: CTimeController, private zeroTimeController: ZeroTimeController, private world: CrittersWorld) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.timeController.onZeroState(() => {\r\n            this.speed = 0;\r\n            this.timeController.setSpeed(0)\r\n        }\r\n        );\r\n    }\r\n\r\n    readonly MAX_SPEED = 100;\r\n\r\n    public speed: number = 0;\r\n\r\n    public timeDirectionForward: boolean = true;\r\n\r\n    onStepOrStop() {\r\n        if (this.speed == 0) {\r\n            if (this.world.IsZeroTime() && this.world.isForwardTimeDirection())\r\n                  this.zeroTimeController.setThisTimeAsZero();\r\n            this.timeController.step();\r\n        }\r\n        else {\r\n            this.speed = 0;\r\n            this.timeController.setSpeed(0)\r\n        }\r\n    }\r\n\r\n    onRunOrFaster() {\r\n        if (this.speed == 0)\r\n            this.speed = 1;\r\n        else {            \r\n            if (this.speed * 2 <= this.MAX_SPEED)\r\n                this.speed = this.speed * 2;\r\n        }\r\n        this.timeController.setSpeed(this.speed);\r\n    }\r\n\r\n    onReverseTime() {\r\n        console.log(\"onReverseTime\");\r\n        this.timeDirectionForward = !this.timeDirectionForward;\r\n        this.timeController.setTimeDirection(this.timeDirectionForward);\r\n    }\r\n\r\n    onToStart() {\r\n        this.speed = 0;\r\n        this.timeController.setSpeed(0);\r\n        this.timeDirectionForward = true;\r\n        this.timeController.timeForward = true;       \r\n        this.zeroTimeController.goToZeroTime();\r\n    }\r\n\r\n\r\n\r\n}\r\n","<div class=\"p-3\">\r\n    <button (click)=\"onStepOrStop()\" class=\"btn btn-outline-primary m-1\">\r\n        <i [ngClass]=\"speed==0?'fas fa-forward-step':'fas fa-stop'\"></i>\r\n    </button>\r\n    <button (click)=\"onRunOrFaster()\" class=\"btn btn-outline-primary m-1\">{{speed+\"  \"}}<i class=\"fas fa-forward\"></i></button>\r\n    <button (click)=\"onReverseTime()\" class=\"btn btn-outline-primary m-1\"><i [ngClass]=\"timeDirectionForward?'fas fa-rotate-back':'fas fa-rotate-forward'\"></i></button>\r\n    <button (click)=\"onToStart()\" class=\"btn btn-outline-primary m-1\"><i class=\"fas fa-backward-fast\"></i></button>    \r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { lastValueFrom } from 'rxjs';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LoginService {\r\n\r\n    constructor(private http: HttpClient) {        \r\n    }\r\n\r\n    userInfo: UserInfo | undefined = undefined;\r\n\r\n\r\n    async Logout() {\r\n        var success = await lastValueFrom(this.http.get(\"/account/logout\"));\r\n        if (success)\r\n            this.userInfo = { name: \"\", signedIn: false };\r\n    }    \r\n\r\n    async getCurrentUserInfo(cacheEnable: boolean): Promise<UserInfo> {\r\n        if (!this.userInfo === undefined || !cacheEnable)\r\n            this.userInfo = await lastValueFrom(this.http.get<UserInfo>(\"/account/userinfo\"));        \r\n        return this.userInfo!;\r\n    }    \r\n\r\n}\r\n\r\nexport class UserInfo {\r\n    name!: string;\r\n    signedIn!: boolean;\r\n}\r\n","import { Directive, ViewContainerRef } from '@angular/core';\r\nimport { LoginComponent } from './login.component';\r\nimport { RegistrationComponent } from './registration.component';\r\n\r\n@Directive({\r\n  selector: '[component-container]',\r\n})\r\nexport class ComponentContainerDirective {\r\n    constructor(public viewContainerRef: ViewContainerRef) { }\r\n\r\n    public showLoginDialog(resultCallBack: (result: string) => void) {\r\n        let login = this.viewContainerRef.createComponent(LoginComponent);\r\n        login.instance.result.subscribe(async evt => {\r\n            this.viewContainerRef.clear();\r\n            if (evt == 'register') {\r\n                let register = this.viewContainerRef.createComponent(RegistrationComponent);\r\n                register.instance.result.subscribe(evt => {\r\n                    this.viewContainerRef.clear();\r\n                });\r\n            }\r\n            else\r\n                resultCallBack(evt);\r\n        });        \r\n    }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { lastValueFrom } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: 'login.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class LoginComponent implements OnInit {\r\n    \r\n    constructor(private http: HttpClient) { }\r\n\r\n    @Output() result = new EventEmitter<string>();\r\n\r\n    loginFailed: boolean = false;\r\n\r\n    ngOnInit(): void {\r\n    }    \r\n\r\n    async onOkButton(emailOrName: string, password: string) {        \r\n        let isEmail = emailOrName.indexOf('@') != -1;\r\n        let res = await lastValueFrom(this.http.post(\"/account/Login\", { UserName: isEmail ? null : emailOrName, Mail: isEmail ? emailOrName: null, Password: password }));\r\n        console.log(res);\r\n        if (res)\r\n            this.result.emit(\"ok\");\r\n        else {\r\n            this.loginFailed = true;\r\n            console.log(\"Login was not successful\");\r\n        }\r\n    }\r\n\r\n    onCancelButton() {\r\n        this.result.emit(\"cancel\");\r\n    }\r\n\r\n    onRegisterButton() {\r\n        this.result.emit(\"register\");\r\n    }\r\n\r\n}\r\n\r\n\r\n","<div class=\"modal\"\r\n     tabindex=\"-1\"\r\n     role=\"dialog\"\r\n     [ngStyle]=\"{'display':'block'}\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h4 class=\"modal-title\">Login</h4>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <p class=\"text-danger\" [hidden]=\"!loginFailed\">Incorrect password or login</p>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"emailInLogin\" class=\"form-label\">User name or email</label>\r\n                    <input #nameInput type=\"text\" class=\"form-control\" placeholder=\"example@mail.com\" aria-label=\"Email\" aria-describedby=\"basic-addon2\">                           \r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"passwordInLogin\" class=\"form-label\">Password</label>\r\n                    <input #passInput type=\"password\" autocomplete=\"off\" class=\"form-control\" id=\"passwordInLogin\" \r\n                           aria-label=\"Password\" aria-describedby=\"basic-addon2\">                           \r\n                </div>\r\n                <a [routerLink]=\"[]\" class=\"link-primary float-end\" (click)=\"onRegisterButton()\">Register</a>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\"  class=\"btn btn-outline-primary\"\r\n                        (click)=\"onOkButton(nameInput.value, passInput.value)\">\r\n                    Sign in\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-outline-primary\"\r\n                        (click)=\"onCancelButton()\">\r\n                    Cancel\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { lastValueFrom } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: 'registration.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class RegistrationComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient) {}\r\n\r\n    @Output() result = new EventEmitter<String>();\r\n\r\n    registrationFailed: boolean = false;\r\n    registrationError: string = \"\";\r\n    eMail!: string;\r\n    userName!: string;\r\n    password!: string;\r\n    password2!: string;\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    async onOkButton() {\r\n        let res = await lastValueFrom(this.http.post(\"/account/Register\", { Mail: this.eMail, Password: this.password, UserName: this.userName })) as any;\r\n        console.log(res);\r\n        if (res.success) {\r\n            console.log(\"Registration success\");\r\n            this.result.emit(\"ok\");\r\n        }\r\n        else {\r\n            this.registrationFailed = true;\r\n            this.registrationError = res.errorDescription;\r\n            console.log(\"Registration failed:\" + this.registrationError);\r\n        }        \r\n    }\r\n\r\n    onCancelButton() {\r\n        this.result.emit(\"cancel\");\r\n    }\r\n\r\n}\r\n","<div class=\"modal\"\r\n     tabindex=\"-1\"\r\n     role=\"dialog\"\r\n     [ngStyle]=\"{'display':'block'}\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h4 class=\"modal-title\">Register</h4>\r\n            </div>            \r\n            <div class=\"modal-body\">\r\n                <p class=\"text-danger\" [hidden]=\"!registrationFailed\">{{registrationError}}</p>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"userInRegister\" class=\"form-label\">User name</label>\r\n                    <input #userInput type=\"text\" class=\"form-control\" placeholder=\"User name\" aria-label=\"User name\" aria-describedby=\"basic-addon2\"\r\n                           value={{userName}} id=\"userInRegister\"\r\n                           (input)=\"userName = userInput.value\">\r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"emailInRegister\" class=\"form-label\">Email</label>\r\n                    <input #nameInput type=\"email\" class=\"form-control\" placeholder=\"Email\" aria-label=\"Email\" aria-describedby=\"basic-addon2\"\r\n                           value={{eMail}} id=\"emailInRegister\"\r\n                           (input)=\"eMail = nameInput.value\">\r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"passwordInRegister\" class=\"form-label\">Password</label>\r\n                    <input #passInput type=\"password\" class=\"form-control\" aria-label=\"Password\" aria-describedby=\"basic-addon2\"\r\n                           value={{password}} id=\"passwordInRegister\"\r\n                           (input)=\"password = passInput.value\">\r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"passwordInRegister2\" class=\"form-label\">Repeat password</label>\r\n                    <input #passInput2 type=\"password\" class=\"form-control\" aria-label=\"Repeat password\" aria-describedby=\"basic-addon2\"\r\n                           value={{password2}} id=\"passwordInRegister2\"\r\n                           (input)=\"password2 = passInput2.value\">\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-primary\"\r\n                        (click)=\"onOkButton()\">\r\n                    Register\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-primary\"\r\n                        (click)=\"onCancelButton()\">\r\n                    Cancel\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { lastValueFrom } from 'rxjs/internal/lastValueFrom';\r\nimport { CEditController } from '../critters/CEditController';\r\nimport { CEditModel } from '../critters/CEditModel';\r\nimport { CrittersWorld, CrittersWorldSerializer, WorldCangesType } from '../critters/CrittersWorld';\r\nimport { CrittersView } from '../critters/CrittersView';\r\nimport { ComponentContainerDirective } from './component-container.directive';\r\nimport { CTimeController } from '../critters/CTimeController';\r\nimport { ZeroTimeController } from '../critters/ZeroTimeController';\r\nimport { LoginService } from '../services/login.service';\r\nimport { LoginComponent } from './login.component';\r\nimport { RegistrationComponent } from './registration.component';\r\n\r\n@Component({\r\n    selector: 'app-sandbox',\r\n    templateUrl: 'sandbox.component.html',\r\n    styles: [\r\n    ],\r\n    providers: [CrittersWorld, CEditController, CEditModel, CrittersView, CTimeController, ZeroTimeController]\r\n})\r\nexport class SandboxComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private router: Router, private world: CrittersWorld,\r\n        private zeroTimeController: ZeroTimeController, private loginService: LoginService) {\r\n    }        \r\n\r\n    // --------------------------------------------------------------    \r\n\r\n    savePopup: SavePopup = new SavePopup();\r\n\r\n    loadPopup: LoadPopup = new LoadPopup();\r\n\r\n    @ViewChild(ComponentContainerDirective, { static: true }) dialogsHost!: ComponentContainerDirective;    \r\n\r\n    public async onSaveButton() {\r\n        if ((await this.loginService.getCurrentUserInfo(false)).signedIn)\r\n            this.savePopup.open(this.http, this.world);\r\n        else {\r\n            this.dialogsHost.showLoginDialog(async (result) => {\r\n                if (result == \"ok\")\r\n                    if ((await this.loginService.getCurrentUserInfo(false)).signedIn)\r\n                        this.savePopup.open(this.http, this.world);\r\n            });\r\n        }        \r\n    }\r\n\r\n    public async onLoadButton() {\r\n        if ((await this.loginService.getCurrentUserInfo(false)).signedIn)            \r\n            this.loadPopup.open(this.http, (w) => this.deserializeWorld(w));\r\n        else {\r\n            this.dialogsHost.showLoginDialog(async (result) => {\r\n                if (result == \"ok\")\r\n                    if ((await this.loginService.getCurrentUserInfo(false)).signedIn)\r\n                        this.loadPopup.open(this.http, (w) => this.deserializeWorld(w));\r\n            });\r\n        }                \r\n    }\r\n\r\n    private deserializeWorld(data: number[]) {\r\n        this.world.Clear();        \r\n        for (let i = 0; i < data.length; i = i + 2) {\r\n            console.log(\"add cell\", data[i], data[i + 1]);\r\n            this.world.AddCell(data[i], data[i + 1]);\r\n        }\r\n        this.zeroTimeController.setThisTimeAsZero();\r\n        this.world.resetModificationFlag();\r\n        this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n    }\r\n\r\n    ngOnInit(): void {                \r\n        this.world.TestInit();\r\n        this.zeroTimeController.setThisTimeAsZero();\r\n        this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n        console.log(\"sandbox ngOnInit()\")\r\n    }\r\n\r\n    public onNext() {\r\n        console.log(\"onNext\");\r\n        this.world.RunSerie(1);\r\n        this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n    }\r\n\r\n    public getExitConfirmText(): string | undefined {\r\n        return \"There are unsaved changes. Do you really want to leave Sandbox?\";\r\n    }\r\n\r\n    public exitConfirmRequired() {\r\n        return this.world.wasModified();\r\n    }    \r\n\r\n\r\n}\r\n\r\nclass SavePopup {\r\n\r\n    titles: SandboxWorldTitleModel[] = [];\r\n    saveName: string = \"\";\r\n    selectedSave: SandboxWorldTitleModel | null = null;\r\n    http!: HttpClient;\r\n    world!: CrittersWorld;\r\n\r\n    savePopupDisplayStyle: string = \"none\";\r\n\r\n    open(http: HttpClient, world: CrittersWorld) {        \r\n        // some slots can be free, some - busy\r\n        // we show all array whith 10 slots;\r\n        // empty slots marked in list and have name ---------\r\n        // user can select slot and change name in dialog if neccessary;\r\n        // name applyed when user save world.        \r\n        this.http = http;\r\n        this.world = world;\r\n        this.titles = [];\r\n        this.saveName = \"\";\r\n        this.selectedSave = null;\r\n        http.get<SandboxWorldTitleModel[]>(\"/sandboxworlds/titles\").subscribe(titles => {\r\n            this.titles = this.ToSlotList(titles);\r\n        });\r\n        this.savePopupDisplayStyle = \"block\";        \r\n    }\r\n\r\n    ToSlotList(titles: SandboxWorldTitleModel[]): SandboxWorldTitleModel[] {\r\n        let result: SandboxWorldTitleModel[] = []\r\n        for (let i = 1; i <= 10; i++)\r\n            result.push({ id: -1, slot: i, name: \"<empty>\" });\r\n        for (let t of titles)\r\n            result[t.slot - 1] = t;\r\n        return result;\r\n    }\r\n\r\n    onSlotSelect(slot: any) {\r\n        this.selectedSave = this.titles[slot - 1];\r\n        if (this.selectedSave != null && this.selectedSave != undefined) {\r\n            this.saveName = this.selectedSave.id == -1 ? (\"World \" + this.selectedSave.slot) : this.selectedSave.name;\r\n        }\r\n    }\r\n\r\n    close() {\r\n        this.savePopupDisplayStyle = \"none\";\r\n    }\r\n\r\n    async onPopupOk() {\r\n        console.log(\"onSavePopupOk\");\r\n        this.savePopupDisplayStyle = \"none\";\r\n        // save current world to slot        \r\n        this.selectedSave!.name = this.saveName;\r\n        //this.selectedSave!.data = this.world.Serialize();\r\n        await this.SaveWorld(this.selectedSave);\r\n        console.log(\"after save\");\r\n    }\r\n\r\n    async SaveWorld(worldTitle: SandboxWorldTitleModel | null) {\r\n        let s = new CrittersWorldSerializer();\r\n        let cellsData = s.SerializeCells(this.world);\r\n        let result = await lastValueFrom(this.http.post(\"/sandboxworlds/savetoslot\", { slot: worldTitle?.slot, newName: worldTitle?.name, cellsData: cellsData }));\r\n        console.log(result);\r\n        if (result)\r\n            this.world.resetModificationFlag();\r\n    }\r\n\r\n}\r\n\r\nclass LoadPopup {\r\n\r\n    titles: SandboxWorldTitleModel[] = [];    \r\n    selectedLoad: SandboxWorldTitleModel | null = null;\r\n    http!: HttpClient;    \r\n    resultCallback!: (cellsData: number[]) => void;\r\n\r\n    loadPopupDisplayStyle: string = \"none\";\r\n\r\n    open(http: HttpClient, resultCallback: (cellsData: number[]) => void) {    \r\n        this.http = http;\r\n        this.resultCallback = resultCallback;\r\n        this.titles = [];   \r\n        this.selectedLoad = null;\r\n        http.get<SandboxWorldTitleModel[]>(\"/sandboxworlds/titles\").subscribe(titles => {\r\n            this.titles = this.ToSlotList(titles);\r\n        });\r\n        this.loadPopupDisplayStyle = \"block\";\r\n    }\r\n\r\n    ToSlotList(titles: SandboxWorldTitleModel[]): SandboxWorldTitleModel[] {\r\n        let result: SandboxWorldTitleModel[] = []\r\n        for (let i = 1; i <= 10; i++)\r\n            result.push({ id: -1, slot: i, name: \"<empty>\" });\r\n        for (let t of titles)\r\n            result[t.slot - 1] = t;\r\n        return result;\r\n    }\r\n\r\n    onSlotSelect(slot: any) {\r\n        this.selectedLoad = this.titles[slot - 1];        \r\n    }\r\n\r\n    close() {\r\n        this.loadPopupDisplayStyle = \"none\";\r\n    }\r\n\r\n    async onPopupOk() {\r\n        console.log(\"onLoadPopupOk\");\r\n        this.loadPopupDisplayStyle = \"none\";\r\n        // load selected world \r\n        let loaded = await lastValueFrom(this.http.get(\"/sandboxworlds/loadfromslot?slot=\" + this.selectedLoad?.slot));\r\n        console.log(\"after load\", (loaded as any).cellsData);\r\n        this.resultCallback((loaded as any).cellsData);\r\n    }\r\n\r\n}\r\n\r\n\r\nclass SandboxWorldTitleModel {\r\n    id: number = -1;\r\n    slot: number = 0;\r\n    name: string = \"\";    \r\n    }\r\n","<div style=\"background: black; height: 100vh; display: grid;\r\n       grid-template-rows: max-content auto;\">\r\n    <div style=\"background: rgb(48, 59, 68); color: white; \">\r\n        <button class=\"btn btn-outline-light m-2\" routerLink=\"/home\"><i class=\"fas fa-home\"></i> Home</button>\r\n        <button class=\"btn btn-outline-light m-2\" (click)=\"onSaveButton()\">Save</button>\r\n        <button class=\"btn btn-outline-light m-2\" (click)=\"onLoadButton()\">Load</button>\r\n    </div>\r\n    <div style=\"background-color: white; position: relative; overflow: hidden\">\r\n        <app-critters-canvas></app-critters-canvas>\r\n        <app-time-control-panel class=\"m-1\" style=\"position: absolute; right:30px; bottom: 30px;\"></app-time-control-panel>        \r\n    </div>\r\n\r\n    <div style=\"position: fixed\">\r\n        <ng-template component-container style=\"position: fixed\"></ng-template>\r\n    </div>\r\n\r\n    <div class=\"modal\"\r\n         tabindex=\"-1\"\r\n         role=\"dialog\"\r\n         [ngStyle]=\"{'display':savePopup.savePopupDisplayStyle}\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h4 class=\"modal-title\">Save world</h4>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <select #saveTitlesSel multiple size=\"10\" class=\"form-select\" aria-label=\"Select slot to save\"\r\n                            style=\"overflow-y: auto;\"\r\n                            (change)=\"savePopup.onSlotSelect(saveTitlesSel.value)\">\r\n                        <option value={{title.slot}} *ngFor=\"let title of savePopup.titles\">{{title.name}}</option>\r\n                    </select>\r\n                    <br />\r\n                    <div #titleinput class=\"input-group mb-3\">\r\n                        <input #nameInput type=\"text\" class=\"form-control\" placeholder=\"World name\" aria-label=\"Recipient's username\" aria-describedby=\"basic-addon2\"\r\n                               value={{savePopup.saveName}}\r\n                               [disabled]=\"savePopup.selectedSave==null\"\r\n                               (input)=\"savePopup.saveName = nameInput.value\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"savePopup.onPopupOk()\"\r\n                            [disabled]=\"savePopup.selectedSave==null\"\r\n                            >\r\n                        Save\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"savePopup.close()\">\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal\"\r\n         tabindex=\"-1\"\r\n         role=\"dialog\"\r\n         [ngStyle]=\"{'display':loadPopup.loadPopupDisplayStyle}\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h4 class=\"modal-title\">Load world</h4>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <select #loadTitlesSel multiple size=\"10\" class=\"form-select\" aria-label=\"Select world\"\r\n                            style=\"overflow-y: auto;\"\r\n                            (change)=\"loadPopup.onSlotSelect(loadTitlesSel.value)\">\r\n                        <option value={{title.slot}} *ngFor=\"let title of loadPopup.titles\">{{title.name}}</option>\r\n                    </select>\r\n                    <br />\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"loadPopup.onPopupOk()\"\r\n                            [disabled]=\"loadPopup.selectedLoad==null || loadPopup.selectedLoad.id == -1\">\r\n                        Load\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"loadPopup.close()\">\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { LoginService, UserInfo } from '../services/login.service';\r\nimport { ComponentContainerDirective } from './component-container.directive';\r\nimport { LoginComponent } from './login.component';\r\nimport { RegistrationComponent } from './registration.component';\r\n\r\n@Component({\r\n  selector: 'app-startpage',\r\n    templateUrl: \"startpage.component.html\",\r\n  styles: [\r\n  ]\r\n})\r\nexport class StartpageComponent implements OnInit {\r\n\r\n    constructor(private loginService: LoginService) { }\r\n\r\n  @ViewChild(ComponentContainerDirective, { static: true }) dialogsHost!: ComponentContainerDirective;\r\n\r\n    userInfo: UserInfo = { name: \"\", signedIn: false };\r\n\r\n    async ngOnInit() {\r\n        this.userInfo = await this.loginService.getCurrentUserInfo(false);\r\n        console.log(this.userInfo);\r\n    }\r\n\r\n    Login() {\r\n        let login = this.dialogsHost.viewContainerRef.createComponent(LoginComponent);\r\n        login.instance.result.subscribe(async evt => {\r\n            this.dialogsHost.viewContainerRef.clear();\r\n            if (evt == 'register') {\r\n                let register = this.dialogsHost.viewContainerRef.createComponent(RegistrationComponent);\r\n                register.instance.result.subscribe(evt => {\r\n                    this.dialogsHost.viewContainerRef.clear();\r\n                });\r\n            }\r\n            this.userInfo = await this.loginService.getCurrentUserInfo(false);\r\n        }\r\n        );        \r\n    }\r\n\r\n    async Logout() {\r\n        await this.loginService.Logout();\r\n        this.userInfo = await this.loginService.getCurrentUserInfo(false);\r\n    }\r\n\r\n}\r\n","<div class=\"container-fluid vh-100 p-0\" style=\"background: rgb(79, 90, 110)\">\r\n    <header class=\"container-fluid\" style=\"background-color: rgb(48, 59, 68)\">\r\n        <nav class=\"navbar navbar-expand-lg navbar-dark fs-4\" style=\"background-color: rgb(48, 59, 68); color: white;\">\r\n            <div class=\"container-fluid\">\r\n                <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span class=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n                <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n                    <ul class=\"navbar-nav me-auto mb-2 mb-lg-0 justify-content-between w-50\">\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link active\" aria-current=\"page\" routerLink=\"/home\">Home</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" routerLink=\"/sandbox\">Sandbox</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" routerLink=\"/wiki\">Investigation</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" routerLink=\"/play\">Game</a>\r\n                        </li>\r\n                    </ul>\r\n                    <label *ngIf=\"userInfo.signedIn\" class=\"text-light me-3 fs-5\">{{userInfo.name}}</label>\r\n                    <button *ngIf=\"userInfo.signedIn\" class=\"btn btn-outline-light my-2 my-sm-0\" type=\"submit\" (click)=\"Logout()\"><i class=\"fas fa-sign-out me-2\"></i>Logout</button>\r\n                    <button *ngIf=\"!userInfo.signedIn\" class=\"btn btn-outline-light my-2 my-sm-0\" type=\"submit\" (click)=\"Login()\"><i class=\"fas fa-sign-in me-2\"></i>Login</button>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    </header>\r\n\r\n    <div class=\"container-fluid p-4\" style=\"color: white\">        \r\n        Critters is defined on a two-dimensional infinite grid of cells, which may be identified with the integer lattice. As in Conway's Game of Life, at any point in time each cell may be in one of two states: alive or dead. The Critters rule is a block cellular automaton using the Margolus neighborhood. This means that, at each step, the cells of the automaton are partitioned into 2 × 2 blocks and each block is updated independently of the other blocks. The center of a block at one time step becomes the corner of four blocks at the next time step, and vice versa; in this way, the four cells in each block belong to four different 2 × 2 blocks of the previous partition.\r\n        <br> (Wikipedia)\r\n    </div>\r\n</div>\r\n\r\n<div style=\"position: fixed\">\r\n    <ng-template component-container style=\"position: fixed\"></ng-template>\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { CEditController } from '../../critters/CEditController';\r\nimport { CEditModel } from '../../critters/CEditModel';\r\nimport { CrittersWorld, WorldCangesType } from '../../critters/CrittersWorld';\r\nimport { CrittersView } from '../../critters/CrittersView';\r\nimport { CEditControllerBase } from '../../critters/CEditControllerBase';\r\nimport { CTimeController } from '../../critters/CTimeController';\r\nimport { ZeroTimeController } from '../../critters/ZeroTimeController';\r\n\r\n@Component({\r\n  selector: 'app-article',\r\n    templateUrl: \"article.component.html\",\r\n  styles: [\r\n    ],\r\n    providers: [CrittersWorld, { provide: CEditController, useClass: CEditControllerBase }, CEditModel, CrittersView,\r\n        CTimeController, ZeroTimeController]\r\n})\r\nexport class ArticleComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private route: ActivatedRoute, private world: CrittersWorld, private zeroTimeController: ZeroTimeController) { }\r\n\r\n    article: ArticleModel | null = null;    \r\n\r\n    CellsFieldIsEmpy(): boolean {        \r\n        return (this.article?.cellsData?.length ?? 0)==0;\r\n    }\r\n\r\n    async ngOnInit() {\r\n        this.route.params.subscribe(routeParams => {\r\n            console.log(\"load start\");\r\n            this.http.get<ArticleModel>(\"/article/\" + (routeParams as any).id).subscribe(async article => {\r\n                console.log(\"Loaded\");\r\n                this.article = article;\r\n                this.world.Clear();\r\n                let data = article.cellsData;\r\n                for (let i = 0; i < data.length; i = i + 2)\r\n                    this.world.AddCell(data[i], data[i + 1]);\r\n                this.zeroTimeController.setThisTimeAsZero();                \r\n                setInterval(() =>\r\n                    this.world.notifyAboutChanges([WorldCangesType.loaded]));\r\n            });\r\n        });\r\n    }\r\n\r\n    ContentToHTML(content: string | undefined): string | undefined {\r\n        return content == undefined ? content: content.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');               \r\n    }\r\n\r\n}\r\n\r\nexport class ArticleModel {\r\n    public id!: string; \r\n    public name!: string;\r\n    public content!: string;\r\n    public cellsData!: number[];\r\n}\r\n","<div style=\"height: 100%; display: grid; position: relative; grid-template-areas: 'area1 area2' 'area1 area2'; \r\n        grid-template-columns: 50% 50%; grid-template-rows: auto 0%\"\r\n     [ngStyle]=\"{'grid-template-columns': CellsFieldIsEmpy()?'100% 0%':'50% 50%'}\">\r\n\r\n    <div style=\"grid-template-rows: 'max-content auto'; color: black; position: relative; \">\r\n        <div class=\"p-3\" style=\"position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; overflow-y: scroll;\">\r\n            <h4>{{article?.name}}<br></h4>\r\n            <div [innerHtml]=\"ContentToHTML(article?.content)\"></div>\r\n        </div>\r\n        <button routerLink=\"/wiki/edit/{{article?.id}}\"\r\n                class=\"btn btn-primary\" style=\"position: absolute; bottom: 20px; right: 30px\">\r\n            <i class=\"fas fa-edit\"></i> Edit\r\n        </button>\r\n    </div>\r\n\r\n    <div style=\"color: black; position: relative;\" [ngStyle]=\"{display: CellsFieldIsEmpy()?'none':'block'}\">\r\n        <app-critters-canvas></app-critters-canvas>\r\n        <app-time-control-panel class=\"m-1\" style=\"position: absolute; right:30px; bottom: 30px;\"></app-time-control-panel>\r\n    </div>\r\n\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ArticleModel } from './article.component';\r\n\r\n@Component({\r\n  selector: 'app-articles',\r\n    templateUrl: \"articles.component.html\",\r\n  styles: [\r\n  ]\r\n})\r\n\r\nexport class ArticlesComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private route: ActivatedRoute) { }\r\n\r\n  articles: ArticleTitleModel[] = [];\r\n\r\n    ngOnInit(): void {\r\n        this.route.params.subscribe(routeParams => {\r\n            console.log(routeParams);\r\n            let request = (routeParams as any).request as string;\r\n            if (!request.startsWith('q:'))\r\n                this.http.get<ArticleTitleModel[]>(\"/articles/\" + request).subscribe(articles => {\r\n                    this.articles = articles;\r\n                });\r\n            else\r\n                this.http.get<ArticleTitleModel[]>(\"/articles/search/\" + request.substr(2)).subscribe(articles => {\r\n                    this.articles = articles;\r\n                });\r\n        });\r\n  }\r\n}\r\n\r\nclass ArticleTitleModel {\r\n    id!: string;\r\n    name!: string;\r\n    shortContent!: string;\r\n    author!: string;\r\n    editionDate!: Date;\r\n}\r\n","<div class=\"p-2\" *ngFor=\"let article of articles\">\r\n    <i class=\"fas fa-user\"></i>\r\n    <p style=\"display: inline; margin-left: 6px\"><b>{{article.author}}</b></p>\r\n    <p style=\"display: inline; margin-left: 6px\" class=\"text-muted\">{{article.editionDate | date:'YYYY-MM-dd hh:mm:ss'}}</p><br>\r\n    <a routerLink=\"/wiki/article/{{article.id}}\" class=\"link-primary\">{{article.name?article.name:\"no name\" }}</a>\r\n    <p class=\"text-muted\"><small>{{article.shortContent}}</small></p>\r\n    <hr>\r\n</div>\r\n\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\nimport { lastValueFrom } from 'rxjs';\r\nimport { CrittersWorld, CrittersWorldSerializer, WorldCangesType } from '../../critters/CrittersWorld';\r\nimport { CEditModel } from '../../critters/CEditModel';\r\nimport { CrittersView } from '../../critters/CrittersView';\r\nimport { CEditController } from '../../critters/CEditController';\r\nimport { CTimeController } from '../../critters/CTimeController';\r\nimport { CWorldSnapshot } from '../../critters/CWorldSnapshot';\r\nimport { ZeroTimeController } from '../../critters/ZeroTimeController';\r\n\r\n@Component({\r\n  selector: 'app-edit-article',\r\n    templateUrl: \"edit.component.html\",    \r\n  styles: [\r\n    ],\r\n    providers: [CrittersWorld, CEditController, CEditModel, CrittersView, CTimeController, ZeroTimeController]\r\n})\r\nexport class EditArticleComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private route: ActivatedRoute, private router: Router, private location: Location,\r\n        private world: CrittersWorld, private zeroTimeController: ZeroTimeController) { }    \r\n\r\n    article: ArticleModel = new ArticleModel();\r\n    isNew: boolean = false;\r\n    nameLength: number | undefined = 0;\r\n    contentLength: number | undefined = 0;    \r\n\r\n    ngOnInit(): void {\r\n        this.route.params.subscribe(routeParams => {\r\n            console.log(routeParams);\r\n            if ((routeParams as any).id != 'new')\r\n                this.http.get<ArticleModel>(\"/article/\" + (routeParams as any).id).subscribe(article => {\r\n                    this.article = article;\r\n                    this.world.Clear();\r\n                    let data = article.cellsData;\r\n                    for (let i = 0; i < data.length ; i = i + 2)\r\n                        this.world.AddCell(data[i], data[i + 1]);\r\n                    this.zeroTimeController.setThisTimeAsZero();                    \r\n                    setTimeout(() =>\r\n                        this.world.notifyAboutChanges([WorldCangesType.loaded]));\r\n                });\r\n            else {                    \r\n                this.isNew = true;\r\n                this.world.Clear();\r\n                this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n            }\r\n        });\r\n    }\r\n\r\n    public async OnSave(name: string, text: string) {\r\n        console.log(name, text);        \r\n        this.article.content = text;\r\n        this.article.name = name;\r\n        this.article.status = 0;        \r\n        let s = new CrittersWorldSerializer();\r\n        let cellsData = s.SerializeCells(this.world);\r\n        this.article.cellsData = cellsData;\r\n        if (this.isNew) {\r\n            let newArticle = await lastValueFrom(await this.http.post<ArticleModel>(\"/article/new\", this.article));\r\n            if (newArticle) {\r\n                this.world.resetModificationFlag();\r\n                this.router.navigateByUrl(\"/wiki/article/\" + newArticle.id);\r\n            }\r\n        }\r\n        else {\r\n            var saved = await lastValueFrom(await this.http.put<ArticleModel>(\"/article/update\", this.article));\r\n            if (saved) {\r\n                this.world.resetModificationFlag();\r\n                this.router.navigateByUrl(\"/wiki/article/\" + this.article.id);\r\n            }\r\n        }        \r\n    }\r\n\r\n    public OnDelete() {\r\n        console.log(\"/article/delete/\" + this.article.id);\r\n        this.http.delete(\"/article/delete/\" + this.article.id).subscribe(() => { });\r\n    }\r\n    public OnReject() {\r\n        console.log(\"/article/reject/\" + this.article.id);\r\n        this.http.put(\"/article/reject/\" + this.article.id, null).subscribe(() => { });\r\n    }\r\n    public OnApprove() {\r\n        console.log(\"/article/approve/\" + this.article.id);\r\n        this.http.put(\"/article/approve/\" + this.article.id, null).subscribe(() => { });\r\n    }\r\n\r\n    public exitConfirmRequired(): boolean {\r\n        return this.world.wasModified();\r\n    }\r\n\r\n    public getExitConfirmText(): string | undefined {\r\n        return \"There are unsaved changes. Do you really want to leave this article page?\";\r\n    }\r\n\r\n    public OnPublish() {\r\n\r\n    }\r\n}\r\n\r\nexport class ArticleModel {\r\n    id!: number;\r\n    name!: string;\r\n    content!: string;\r\n    authorName!: string;\r\n    authorId!: string;\r\n    cellsData!: number[];\r\n    creationDate!: string;\r\n    lastEditionDate!: string;\r\n    approvalDate!: string;\r\n    status!: Number;\r\n}\r\n","<div style=\"height:100%; display: grid; position: relative; grid-template-areas: 'area1 area2' 'buttons1 buttons2'; \r\n            grid-template-columns: 50% 50%; grid-template-rows: auto max-content\">\r\n    <div style=\"display: grid; grid-template-rows: 'max-content auto'; grid-area: area1; color: black; position: relative\">\r\n        <div class=\"m-2\">\r\n            <label class=\"form-label\">Article title</label>\r\n            <input #articleName (input)=\"nameLength = articleName?.value?.length\" [value]=\"article? article.name:''\" class=\"form-control\">            \r\n            <label class=\"form-label text-danger\" *ngIf=\"(nameLength??0)>80\">the maximum name length is 80 ({{nameLength}})</label>\r\n        </div>\r\n        <div class=\"m-2\" style=\"display: grid; grid-template-rows: 'max-content auto' \">\r\n            <label class=\"form-label\">Article text</label>\r\n            <textarea #articleContent (input)=\"contentLength = articleContent?.value?.length\" [value]=\"article? article.content:''\" class=\"form-control\"></textarea>\r\n            <label class=\"form-label text-danger\" *ngIf=\"(contentLength??0)>10000\">the maximum content length is 10000 ({{contentLength}})</label>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"background: rgb(255 106 0); grid-area: area2; color: white; position: relative\">\r\n        <app-critters-canvas></app-critters-canvas>\r\n        <app-time-control-panel class=\"m-1\" style=\"position: absolute; right:30px; bottom: 30px;\"></app-time-control-panel>\r\n    </div>\r\n    <div style=\"background: rgb(240, 240, 240); grid-area: buttons1; color: white; position: relative \">\r\n        <button class=\"btn btn-outline-danger m-2\" (click)=\"OnApprove()\">Approve</button>\r\n        <button class=\"btn btn-outline-danger m-2\" (click)=\"OnReject()\">Reject</button>\r\n        <button class=\"btn btn-outline-danger m-2\" (click)=\"OnDelete()\">Delete</button>\r\n    </div>\r\n    <div style=\"background: rgb(240, 240, 240); grid-area: buttons2; position: relative \">\r\n        <button class=\"btn btn-outline-success m-2 float-end\" (click)=\"OnPublish()\">Publish</button>\r\n        <button class=\"btn btn-outline-success m-2 float-end\" (click)=\"OnSave(articleName.value, articleContent.value )\">Save as draft</button>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Route, Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-wiki',\r\n  templateUrl: \"wiki.component.html\",\r\n  styles: [\r\n  ]\r\n})\r\nexport class WikiComponent implements OnInit {\r\n\r\n  constructor(private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    }\r\n\r\n    OnSearch(request: string) {\r\n        this.router.navigateByUrl(\"/wiki/articles/q:\" + request);\r\n    }\r\n\r\n\r\n}\r\n","<div style=\"background: green; height: 100vh; display: grid; position: relative; grid-template-areas: 'header1 header2' 'menu workArea';\r\n            grid-template-columns: 200px auto;\r\n            grid-template-rows: max-content auto\">\r\n    <div style=\"background: rgb(48, 59, 68); grid-area: header1; color: white; position: relative\">\r\n        <button class=\"btn btn-outline-light m-2\" routerLink=\"/home\"><i class=\"fas fa-home\"></i> Home</button>\r\n    </div>\r\n    <div style=\"background: rgb(48, 59, 68); grid-area: header2; color: white; position: relative\">\r\n        <div class=\"input-group mt-2 float-start\" style=\"width: 400px\">\r\n            <input #searchInput class=\"form-control\" placeholder=\"something to find\" aria-label=\"Find\" aria-describedby=\"basic-addon2\">\r\n            <button class=\"btn btn-outline-secondary\" type=\"button\" (click)=\"OnSearch(searchInput.value)\"><i class=\"fas fa-search\"></i></button>\r\n        </div>\r\n        <button class=\"btn btn-success m-2 float-end\" style=\"grid-area: header2\" routerLink=\"edit/new\">Create article</button>\r\n    </div>\r\n    <div style=\"background: rgb(79, 90, 110); width: 200px; grid-area: menu; color: white \">\r\n        <a routerLink='article/Contents' class=\"link-light m-3\" style=\"display: block\">Contents</a>\r\n        <a routerLink='article/Random' class=\"link-light m-3\" style=\"display: block\">Random article</a>\r\n        <a routerLink='articles/All' class=\"link-light m-3\" style=\"display: block\">All articles</a>\r\n        <a routerLink='articles/My' class=\"link-light m-3\" style=\"display: block\">My articles</a>\r\n        <a routerLink='article/About' class=\"link-light m-3\" style=\"display: block\">About investigations</a>\r\n    </div>\r\n    <div style=\"background: white; grid-area: workArea; position: relative\">\r\n        <router-outlet></router-outlet>\r\n    </div>\r\n</div>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"names":["lastValueFrom","LoginService","constructor","http","undefined","Logout","success","get","userInfo","name","signedIn","getCurrentUserInfo","cacheEnable","i0","factory","providedIn","UserInfo","ViewContainerRef","LoginComponent","RegistrationComponent","ComponentContainerDirective","viewContainerRef","showLoginDialog","resultCallBack","login","createComponent","instance","result","subscribe","evt","clear","register","selectors","EventEmitter","ngOnInit","onOkButton","emailOrName","password","isEmail","indexOf","res","post","UserName","Mail","Password","console","log","emit","loginFailed","onCancelButton","onRegisterButton","outputs","decls","vars","consts","template","ctx","eMail","userName","registrationFailed","registrationError","errorDescription","CEditController","CEditModel","CrittersWorld","CrittersWorldSerializer","WorldCangesType","CrittersView","CTimeController","ZeroTimeController","SandboxComponent","router","world","zeroTimeController","loginService","SavePopup","LoadPopup","onSaveButton","savePopup","open","dialogsHost","onLoadButton","loadPopup","w","deserializeWorld","data","Clear","i","length","AddCell","setThisTimeAsZero","resetModificationFlag","notifyAboutChanges","loaded","TestInit","onNext","RunSerie","executed","getExitConfirmText","exitConfirmRequired","wasModified","viewQuery","titles","saveName","selectedSave","ToSlotList","savePopupDisplayStyle","push","id","slot","t","onSlotSelect","close","onPopupOk","SaveWorld","worldTitle","s","cellsData","SerializeCells","newName","resultCallback","selectedLoad","loadPopupDisplayStyle","SandboxWorldTitleModel","StartpageComponent","Login","CEditControllerBase","ArticleComponent","route","CellsFieldIsEmpy","article","params","routeParams","setInterval","ContentToHTML","content","replace","features","provide","useClass","ArticleModel","EditArticleComponent","location","setTimeout","isNew","OnSave","text","status","newArticle","navigateByUrl","saved","put","OnDelete","delete","OnReject","OnApprove","OnPublish"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}