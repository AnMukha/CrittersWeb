{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.html","./src/app/app.module.ts","./src/app/critters/CEditController/CrittersEditController.ts","./src/app/critters/CEditController/EditCellRule.ts","./src/app/critters/CEditController/SandBoxCrittersEditController.ts","./src/app/critters/CEditController/ScrollRule.ts","./src/app/critters/CEditController/TouchScrollRule.ts","./src/app/critters/CEditController/ViewOnlyCrittersEditController.ts","./src/app/critters/CEditController/WheelRule.ts","./src/app/critters/CEditModel.ts","./src/app/critters/CTimeController.ts","./src/app/critters/CrittersView.ts","./src/app/critters/CrittersWorld.ts","./src/app/critters/ZeroTimeController.ts","./src/app/critters/critters-canvas/critters-canvas.component.ts","./src/app/critters/critters-canvas/critters-canvas.component.html","./src/app/critters/time-control-panel/time-control-panel.component.ts","./src/app/critters/time-control-panel/time-control-panel.component.html","./src/app/services/login.service.ts","./src/app/views/component-container.directive.ts","./src/app/views/login.component.ts","./src/app/views/login.component.html","./src/app/views/registration.component.ts","./src/app/views/registration.component.html","./src/app/views/sandbox.component.ts","./src/app/views/sandbox.component.html","./src/app/views/startpage.component.ts","./src/app/views/startpage.component.html","./src/app/views/wiki/article.component.ts","./src/app/views/wiki/article.component.html","./src/app/views/wiki/articles.component.ts","./src/app/views/wiki/articles.component.html","./src/app/views/wiki/edit.component.ts","./src/app/views/wiki/edit.component.html","./src/app/views/wiki/wiki.component.ts","./src/app/views/wiki/wiki.component.html","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { LoginComponent } from './views/login.component';\r\nimport { SandboxComponent } from './views/sandbox.component';\r\nimport { StartpageComponent } from './views/startpage.component';\r\nimport { ArticleComponent } from './views/wiki/article.component';\r\nimport { ArticlesComponent } from './views/wiki/articles.component';\r\nimport { EditArticleComponent } from './views/wiki/edit.component';\r\nimport { WikiComponent } from './views/wiki/wiki.component';\r\n\r\nconst routes: Routes = [\r\n    { path: '', redirectTo: 'home', pathMatch: 'full' },\r\n    { path: \"home\", component: StartpageComponent },\r\n    {\r\n        path: \"sandbox\",\r\n        component: SandboxComponent,\r\n        canDeactivate: [(sandBox: SandboxComponent) =>        \r\n            sandBox.exitConfirmRequired() ? window.confirm(sandBox.getExitConfirmText()): true\r\n        ]\r\n    },\r\n    {\r\n        path: \"wiki\", component: WikiComponent, \r\n        children: [\r\n            {\r\n                path: 'article/:id',\r\n                component: ArticleComponent,\r\n            },\r\n            {\r\n                path: 'edit/:id',\r\n                component: EditArticleComponent,\r\n                canDeactivate: [(editArt: EditArticleComponent) =>\r\n                    editArt.exitConfirmRequired() ? window.confirm(editArt.getExitConfirmText()) : true]\r\n            },\r\n            {\r\n                path: 'articles/:request',\r\n                component: ArticlesComponent\r\n            },\r\n        ],\r\n    },\r\n    { path: \"login\", component: LoginComponent },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes,\r\n        { useHash: true }\r\n    )],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: 'app.html' ,\r\n    styles: []\r\n})\r\nexport class AppComponent {\r\n  title = 'client';\r\n}\r\n","<router-outlet></router-outlet>\r\n","import { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { SandboxComponent } from './views/sandbox.component';\r\nimport { StartpageComponent } from './views/startpage.component';\r\nimport { WikiComponent } from './views/wiki/wiki.component';\r\nimport { LoginComponent } from './views/login.component';\r\nimport { ComponentContainerDirective } from './views/component-container.directive';\r\nimport { RegistrationComponent } from './views/registration.component';\r\nimport { ArticleComponent } from './views/wiki/article.component';\r\nimport { ArticlesComponent } from './views/wiki/articles.component';\r\nimport { EditArticleComponent } from './views/wiki/edit.component';\r\nimport { CrittersCanvasComponent } from './critters/critters-canvas/critters-canvas.component';\r\nimport { TimeControlPanelComponent } from './critters/time-control-panel/time-control-panel.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,    \r\n    SandboxComponent,\r\n    StartpageComponent,\r\n    WikiComponent,\r\n    LoginComponent,\r\n    ComponentContainerDirective,\r\n    RegistrationComponent,\r\n    ArticleComponent,\r\n    ArticlesComponent,\r\n    EditArticleComponent,\r\n    CrittersCanvasComponent,\r\n    TimeControlPanelComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    HttpClientModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","\r\nexport abstract class CrittersEditController {\r\n    mouseDownHandler(event: any): void { };\r\n    mouseUpHandler(event: any): void { };\r\n    mouseMoveHandler(event: any): void { };\r\n    mouseWheelHandler(event: any): void { };\r\n    touchStartHandler(event: any): void { };\r\n    touchEndHandler(event: any): void { };\r\n    touchMoveHandler(event: any): void { };\r\n}\r\n","import { CEditModel } from \"../CEditModel\";\r\nimport { CPoint, CrittersWorld, WorldCangesType } from \"../CrittersWorld\";\r\n\r\nexport class EditCellRule {\r\n\r\n    constructor(private cWorld: CrittersWorld, private editModel: CEditModel) {\r\n    }\r\n\r\n    startPos: CPoint | undefined = undefined;\r\n    static readonly mouse_shift_to_edit = 4;\r\n\r\n    onMouseDown(event: any): WorldCangesType[] {\r\n        this.startPos = new CPoint(event.offsetX, event.offsetY);\r\n        return [];\r\n    }\r\n\r\n    onMouseUp(event: any): WorldCangesType[] {\r\n        let modified = false;\r\n        if (this.startPos != undefined) {\r\n            let endCell = this.editModel.CellXYInScr(event.offsetX, event.offsetY);\r\n            if (Math.abs(this.startPos.X - event.offsetX) < EditCellRule.mouse_shift_to_edit && Math.abs(this.startPos.Y - event.offsetY) < EditCellRule.mouse_shift_to_edit) {\r\n                if (this.cWorld.GetCell(endCell.X, endCell.Y) === undefined)\r\n                    this.cWorld.AddCell(endCell.X, endCell.Y);\r\n                else\r\n                    this.cWorld.ClearCell(endCell.X, endCell.Y);\r\n                modified = true;\r\n            }\r\n            this.startPos = undefined;\r\n        }\r\n        return modified ? [WorldCangesType.cellsEditing] : [];\r\n    }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CEditModel } from \"../CEditModel\";\r\nimport { CrittersWorld, WorldCangesType } from \"../CrittersWorld\";\r\nimport { CrittersEditController } from \"./CrittersEditController\";\r\nimport { EditCellRule } from \"./EditCellRule\";\r\nimport { ScrollRule } from \"./ScrollRule\";\r\nimport { TouchScrollRule } from \"./TouchScrollRule\";\r\nimport { WheelRule } from \"./WheelRule\";\r\n\r\n\r\n@Injectable()\r\nexport class SandBoxCrittersEditController implements CrittersEditController {\r\n\r\n    constructor(private cWorld: CrittersWorld, private editModel: CEditModel) {        \r\n        this.scrollRule = new ScrollRule(editModel);\r\n        this.editCellRule = new EditCellRule(cWorld, editModel);\r\n        this.wheelRule = new WheelRule(editModel);\r\n        this.touchScrollRule = new TouchScrollRule(cWorld, editModel);\r\n    }\r\n\r\n    scrollRule: ScrollRule;\r\n    editCellRule: EditCellRule;\r\n    wheelRule: WheelRule;\r\n    touchScrollRule: TouchScrollRule;\r\n\r\n    public mouseDownHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.editCellRule.onMouseDown(event));\r\n        changings.push(...this.scrollRule.onMouseDown(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public mouseUpHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.editCellRule.onMouseUp(event));\r\n        changings.push(...this.scrollRule.onMouseUp(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public mouseMoveHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.scrollRule.onMouseMove(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n\r\n    public touchStartHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.touchScrollRule.onTouchStart(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public touchEndHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.touchScrollRule.onTouchEnd(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public touchMoveHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.touchScrollRule.onTouchMove(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public mouseWheelHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];\r\n        changings.push(...this.wheelRule.onWheel(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n}\r\n\r\n","import { CEditModel } from \"../CEditModel\";\r\nimport { CPoint, WorldCangesType } from \"../CrittersWorld\";\r\n\r\nexport class ScrollRule {\r\n    constructor(private editModel: CEditModel) {\r\n    }\r\n\r\n    startPos: CPoint | undefined = undefined;\r\n    startFramePos: CPoint | undefined = undefined;\r\n\r\n    onMouseDown(event: any): WorldCangesType[] {\r\n        this.startPos = new CPoint(event.offsetX, event.offsetY);\r\n        this.startFramePos = this.editModel.GetFramePos();\r\n        return [];\r\n    }\r\n\r\n    onMouseUp(event: any): WorldCangesType[] {\r\n        if (this.startPos != undefined) {\r\n            let curPos = new CPoint(event.offsetX, event.offsetY);\r\n            this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos.X - this.startPos!.X);\r\n            this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos.Y - this.startPos!.Y);\r\n            this.startPos = undefined;\r\n            return [WorldCangesType.frameChanging];\r\n        }\r\n        return [];\r\n    }\r\n\r\n    onMouseMove(event: any): WorldCangesType[] {\r\n        if (this.startPos != undefined) {\r\n            let curPos = new CPoint(event.offsetX, event.offsetY);\r\n            this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos.X - this.startPos!.X);\r\n            this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos.Y - this.startPos!.Y);\r\n            return [WorldCangesType.frameChanging];\r\n        }\r\n        return [];\r\n    }\r\n}\r\n","import { CEditModel } from \"../CEditModel\";\r\nimport { CPoint, CrittersWorld, WorldCangesType } from \"../CrittersWorld\";\r\n\r\nexport class TouchScrollRule {\r\n    constructor(private cWorld: CrittersWorld, private editModel: CEditModel) {\r\n    }\r\n\r\n    startPos1: CPoint | undefined = undefined;\r\n    startPos2: CPoint | undefined = undefined;\r\n    startFramePos: CPoint | undefined = undefined;\r\n    startScale: number = 1;\r\n\r\n    onTouchStart(event: any): WorldCangesType[] {\r\n        if (event.touches.length == 0)\r\n            return [];\r\n        var bcr = event.target.getBoundingClientRect();\r\n        this.startPos1 = new CPoint(event.touches[0].clientX - bcr.x, event.touches[0].clientY - bcr.y);\r\n        if (event.touches.length > 1) {\r\n            this.startPos2 = new CPoint(event.touches[1].clientX - bcr.x, event.touches[1].clientY - bcr.y);\r\n            this.startScale = this.editModel.scale;\r\n        }\r\n        this.startFramePos = this.editModel.GetFramePos();\r\n        return [];\r\n    }\r\n\r\n    onTouchEnd(event: any): WorldCangesType[] {\r\n        if (event.changedTouches.length == 0) {\r\n            this.startPos1 = undefined;\r\n            this.startPos2 = undefined;\r\n            return [];\r\n        }\r\n        if (event.changedTouches.length == 1) {\r\n            this.startPos2 = undefined;\r\n        }\r\n        if (this.startPos1 != undefined) {\r\n            var bcr = event.target.getBoundingClientRect();\r\n            let curPos = new CPoint(event.changedTouches[0].clientX - bcr.x, event.changedTouches[0].clientY - bcr.y);\r\n            let endCell = this.editModel.CellXYInScr(curPos.X, curPos.Y);\r\n            if (event.changedTouches.length == 1 && Math.abs(this.startPos1.X - curPos.X) < 5 && Math.abs(this.startPos1.Y - curPos.Y) < 5) {\r\n                if (this.cWorld.GetCell(endCell.X, endCell.Y) === undefined)\r\n                    this.cWorld.AddCell(endCell.X, endCell.Y);\r\n                else\r\n                    this.cWorld.ClearCell(endCell.X, endCell.Y);\r\n                return [WorldCangesType.cellsEditing];\r\n            }\r\n            else {\r\n                this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos.X - this.startPos1!.X);\r\n                this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos.Y - this.startPos1!.Y);\r\n                this.startPos1 = undefined;\r\n                return [WorldCangesType.frameChanging];\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    onTouchMove(event: any): WorldCangesType[] {\r\n        if (event.changedTouches.length == 0) {\r\n            this.startPos1 = undefined;\r\n            this.startPos2 = undefined;\r\n            return [];\r\n        }\r\n        if (event.changedTouches.length == 1) {\r\n            this.startPos2 = undefined;\r\n        }\r\n        var bcr = event.target.getBoundingClientRect();\r\n        let curPos1 = new CPoint(event.touches[0].clientX - bcr.x, event.touches[0].clientY - bcr.y);\r\n        let curPos2: CPoint | undefined = undefined;\r\n        if (event.touches.length > 1)\r\n            curPos2 = new CPoint(event.touches[1].clientX - bcr.x, event.touches[1].clientY - bcr.y);\r\n\r\n        if (this.startPos1 != undefined && this.startPos2 != undefined && curPos2 != undefined) {\r\n            this.editModel.scale = this.startScale / this.startPos1.dist(this.startPos2) * curPos1.dist(curPos2);\r\n        }\r\n        if (this.startPos1 != undefined) {\r\n            this.editModel.X = this.startFramePos!.X - this.editModel.ScrdXToCell(curPos1.X - this.startPos1!.X);\r\n            this.editModel.Y = this.startFramePos!.Y - this.editModel.ScrdYToCell(curPos1.Y - this.startPos1!.Y);\r\n            return [WorldCangesType.frameChanging];\r\n        }\r\n        return [];\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CEditModel } from \"../CEditModel\";\r\nimport { CPoint, CrittersWorld, WorldCangesType } from \"../CrittersWorld\";\r\nimport { CrittersEditController } from \"./CrittersEditController\";\r\nimport { EditCellRule } from \"./EditCellRule\";\r\nimport { ScrollRule } from \"./ScrollRule\";\r\nimport { TouchScrollRule } from \"./TouchScrollRule\";\r\nimport { WheelRule } from \"./WheelRule\";\r\n\r\n@Injectable()\r\nexport class ViewOnlyCrittersEditController implements CrittersEditController {\r\n\r\n    constructor(private cWorld: CrittersWorld, private editModel: CEditModel) {  \r\n        this.scrollRule = new ScrollRule(editModel);        \r\n        this.wheelRule = new WheelRule(editModel);\r\n        this.touchScrollRule = new TouchScrollRule(cWorld, editModel);\r\n    }\r\n\r\n    scrollRule: ScrollRule;    \r\n    wheelRule: WheelRule;\r\n    touchScrollRule: TouchScrollRule;\r\n\r\n    public mouseDownHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.scrollRule.onMouseDown(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public mouseUpHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];                \r\n        changings.push(...this.scrollRule.onMouseUp(event));        \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public mouseMoveHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.scrollRule.onMouseMove(event));        \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n\r\n    public touchStartHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.touchScrollRule.onTouchStart(event));\r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public touchEndHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.touchScrollRule.onTouchEnd(event));            \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public touchMoveHandler(event: any) {\r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.touchScrollRule.onTouchMove(event));            \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n\r\n    public mouseWheelHandler(event: any) {        \r\n        let changings: WorldCangesType[] = [];        \r\n        changings.push(...this.wheelRule.onWheel(event));            \r\n        if (changings.length > 0)\r\n            this.cWorld.notifyAboutChanges(changings);\r\n    }\r\n    \r\n}\r\n\r\n","import { CEditModel } from \"../CEditModel\";\r\nimport { CPoint, WorldCangesType } from \"../CrittersWorld\";\r\n\r\nexport class WheelRule {\r\n    constructor(private editModel: CEditModel) {\r\n    }\r\n\r\n    startPos: CPoint | undefined = undefined;\r\n    startFramePos: CPoint | undefined = undefined;\r\n\r\n    onWheel(event: any): WorldCangesType[] {\r\n        console.log(event);\r\n        let mouseX0 = this.editModel.ScrXToCell(event.offsetX);\r\n        let mouseY0 = this.editModel.ScrYToCell(event.offsetY);\r\n        if (event.deltaY > 0 && this.editModel.scale > 0.7 || event.deltaY < 0 && this.editModel.scale < 100)\r\n            this.editModel.scale = this.editModel.scale * Math.pow(1.1, -event.deltaY / 120);\r\n        let mouseX = this.editModel.ScrXToCell(event.offsetX);\r\n        let mouseY = this.editModel.ScrYToCell(event.offsetY);\r\n        this.editModel.X -= mouseX - mouseX0;\r\n        this.editModel.Y -= mouseY - mouseY0;\r\n        return [WorldCangesType.frameChanging];\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject } from \"rxjs\";\r\nimport { CPoint } from \"./CrittersWorld\";\r\n\r\n@Injectable()\r\nexport class CEditModel {\r\n\r\n    scale: number = 10;\r\n    X: number = 0;\r\n    Y: number = 0;\r\n    gridActual: boolean = false;    \r\n\r\n    public readonly changesSubject: Subject<number> = new Subject();\r\n\r\n    CellXToScr(x: number): number {\r\n        return (x - this.X) * this.scale;\r\n    }\r\n\r\n    CellYToScr(y: number): number {\r\n        return (y - this.Y) * this.scale;\r\n    }\r\n\r\n    CelldXToScr(dx: number) {\r\n        return dx * this.scale;\r\n    }\r\n\r\n    CelldYToScr(dy: number) {\r\n        return dy * this.scale;\r\n    }\r\n\r\n    ScrXToCell(x: number) {\r\n        return this.X + x / this.scale;\r\n    }\r\n\r\n    ScrYToCell(y: number) {\r\n        return this.Y + y / this.scale;\r\n    }\r\n\r\n    ScrdXToCell(x: number) {\r\n        return x / this.scale;\r\n    }\r\n\r\n    ScrdYToCell(y: number) {\r\n        return y / this.scale;\r\n    }\r\n\r\n    CellXYInScr(x: number, y: number): CPoint {\r\n        return new CPoint(Math.floor(this.ScrXToCell(x)), Math.floor(this.ScrYToCell(y)));\r\n    }\r\n\r\n    GetFramePos(): CPoint {\r\n        return new CPoint(this.X, this.Y)\r\n    }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CrittersWorld, WorldCangesType } from \"./CrittersWorld\";\r\nimport { ZeroTimeController } from \"./ZeroTimeController\";\r\n\r\n@Injectable()\r\nexport class CTimeController {\r\n    constructor(private world: CrittersWorld, private ztContorller: ZeroTimeController) {\r\n    }\r\n\r\n    speed: number = 0;\r\n    timeForward: boolean = true;\r\n    execTimer: NodeJS.Timeout | undefined = undefined;\r\n\r\n    public step() {\r\n        this.RunSerie(1);\r\n        this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n        this.toOddStep();        \r\n    }\r\n\r\n    RunSerie(stepCount: number) {        \r\n        var stNum = this.world.GetStepNum();\r\n        for (let n = stNum; n < stNum + stepCount; n++) {\r\n            if (this.world.IsZeroTime())\r\n                this.ztContorller.beforeZeroTimePass();\r\n            this.world.RunSerie(stepCount);\r\n        }\r\n    }\r\n\r\n    public setSpeed(speed: number) {        \r\n        this.speed = speed;\r\n        if (this.execTimer)\r\n            clearTimeout(this.execTimer);\r\n        this.stepOnTimer();                          \r\n        if (this.speed == 0)\r\n            this.toOddStep();\r\n    }    \r\n\r\n    private stepOnTimer() {\r\n        if (this.speed != 0) {\r\n            let stepCount = 1;\r\n            let interval = 1 / this.speed * 1000;\r\n            if (interval < 20) {\r\n                stepCount = Math.round(20/interval);\r\n                interval = 20;                \r\n            };\r\n            this.RunSerie(stepCount);\r\n            this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n            //if (!this.world.IsZeroTime()) \r\n            this.execTimer = setTimeout(() => this.stepOnTimer(), interval);\r\n            //else {\r\n                //this.speed = 0;\r\n                //if (this.onZeroStateCallback)\r\n                    //this.onZeroStateCallback();\r\n            //}\r\n        }\r\n        else {\r\n            if (this.execTimer)\r\n                clearTimeout(this.execTimer);\r\n            this.execTimer = undefined;\r\n        }            \r\n    }   \r\n\r\n    private toOddStep() {        \r\n        if (this.world.IsEvenStep())\r\n            setTimeout(() =>\r\n            {                \r\n                if (this.world.IsEvenStep()) {                    \r\n                    this.RunSerie(1);\r\n                    this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n                }\r\n            }, 500);    \r\n    }\r\n\r\n    public setTimeDirection(forward: boolean) {\r\n        if (this.timeForward != forward)\r\n            this.timeForward = forward;\r\n        if (this.world.isForwardTimeDirection() != forward) {\r\n            this.world.ReverseTimeDirection();\r\n            this.toOddStep();            \r\n        }        \r\n    }    \r\n\r\n    //onZeroStateCallback!: () => void;\r\n\r\n    //onZeroState(cb: () => void) {\r\n        //this.onZeroStateCallback = cb;\r\n    //}\r\n\r\n\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { CEditModel } from \"./CEditModel\";\r\nimport { CrittersWorld } from \"./CrittersWorld\";\r\n\r\n@Injectable()\r\nexport class CrittersView {\r\n    public constructor(private world: CrittersWorld, private editModel: CEditModel) {        \r\n    }\r\n    \r\n    paint(canvas: HTMLCanvasElement) {\r\n        let ctx = canvas.getContext('2d');\r\n        ctx!.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx!.canvas.width = ctx!.canvas.clientWidth;\r\n        ctx!.canvas.height = ctx!.canvas.clientHeight;\r\n        this.PaintGrid(ctx!);\r\n        this.PaintInfo(ctx!);\r\n\r\n        ctx!.fillStyle = \"green\";\r\n        for (let c of this.world.getCells()) {            \r\n            let x = this.editModel.CellXToScr(c.x);\r\n            let y = this.editModel.CellYToScr(c.y);\r\n            if (x < canvas.width && x > 0 - this.editModel.scale\r\n                && y > 0 - this.editModel.scale && y < canvas.height) {\r\n                ctx!.fillRect(x, y, this.editModel.scale, this.editModel.scale);\r\n            }            \r\n        }\r\n    }\r\n\r\n    PaintGrid(ctx: CanvasRenderingContext2D) {\r\n        if (this.editModel.scale < 2)\r\n            return;\r\n        let x0 = Math.floor(this.editModel.ScrXToCell(0)/2)*2 - 3;\r\n        let x1 = Math.floor(this.editModel.ScrXToCell(ctx!.canvas.width)/2)*2 + 3;\r\n        ctx.strokeStyle = 'rgba(100, 100, 100, 0.3)';\r\n        for (let x = x0; x <= x1; x = x + 2) {\r\n            ctx.beginPath();\r\n            let xs = this.editModel.CellXToScr(x);\r\n            ctx.moveTo(xs, 0);\r\n            ctx.lineTo(xs, ctx!.canvas.height);\r\n            ctx.stroke();\r\n        }\r\n        /*ctx.strokeStyle = 'rgba(100, 100, 100, 0.2)';\r\n        for (let x = x0-1; x <= x1; x = x + 2) {\r\n            ctx.beginPath();\r\n            let xs = this.editModel.CellXToScr(x);\r\n            ctx.moveTo(xs, 0);\r\n            ctx.lineTo(xs, ctx!.canvas.height);\r\n            ctx.stroke();\r\n        }            */\r\n        let y0 = Math.floor(this.editModel.ScrYToCell(0)/2)*2 - 3;\r\n        let y1 = Math.floor(this.editModel.ScrYToCell(ctx!.canvas.height)/2)*2 + 3;\r\n        ctx.strokeStyle = 'rgba(100, 100, 100, 0.3)';\r\n        for (let y = y0; y <= y1; y = y + 2) {\r\n            ctx.beginPath();\r\n            let ys = this.editModel.CellYToScr(y);\r\n            ctx.moveTo(0, ys);\r\n            ctx.lineTo(ctx!.canvas.width, ys);\r\n            ctx.stroke();\r\n        }\r\n        /*ctx.strokeStyle = 'rgba(100, 100, 100, 0.2)';\r\n        for (let y = y0 - 1; y <= y1; y = y + 2) {\r\n            ctx.beginPath();\r\n            let ys = this.editModel.CellYToScr(y);\r\n            ctx.moveTo(0, ys);\r\n            ctx.lineTo(ctx!.canvas.width, ys);\r\n            ctx.stroke();\r\n        }*/\r\n    }\r\n\r\n    PaintInfo(ctx: CanvasRenderingContext2D) {\r\n        let text: string = (this.world.GetStepNum() - 1).toString();\r\n        ctx.font = \"15px Arial\";\r\n        ctx.fillStyle = \"rgb(13,110,253)\";\r\n        ctx.fillText(text, ctx.canvas.width - 50, 30);\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n// на входе получает провайдер canvas, мир, модель отображения, модель редактирования;\r\n// по команде извне рисует на канвасе мир, согласно модели отображения и добавляет модель редактирования;\r\n// остальную логику выполняют контроллеры\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject, timeInterval } from \"rxjs\";\r\nimport { CWorldSnapshot } from \"./CWorldSnapshot\";\r\n\r\n\r\n@Injectable()\r\nexport class CrittersWorld {\r\n    \r\n    constructor() {\r\n    }\r\n\r\n    private cells: Map<number, Cell> = new Map<number, Cell>();    \r\n\r\n    private stepNum: number = 1;\r\n    private forward: boolean = true;\r\n    private modified: boolean = false;\r\n\r\n    private nextCellKey: number = 0;\r\n    \r\n    public readonly changesSubject: Subject<WorldCangesType[]> = new Subject();    \r\n\r\n    public AddCell(x: number, y: number): Cell {\r\n        let key = x * Cell.KEY_GEN_FACTOR + y;\r\n        let resultCell = new Cell(this.NextCellKey(), x, y, this.stepNum);\r\n        this.cells.set(key, resultCell);\r\n        return resultCell;\r\n    }\r\n\r\n    public getCells(): IterableIterator<Cell> {\r\n        return this.cells.values();\r\n    }\r\n\r\n    private NextCellKey(): number {\r\n        this.nextCellKey++;\r\n        return this.nextCellKey;\r\n    }\r\n\r\n    public notifyAboutChanges(changeTypes: WorldCangesType[]) {\r\n        if (changeTypes.includes(WorldCangesType.cellsEditing))\r\n            this.modified = true;\r\n        this.changesSubject.next(changeTypes);\r\n    }\r\n\r\n    public resetModificationFlag() {\r\n        this.modified = false;\r\n    }\r\n\r\n    public wasModified(): boolean {\r\n        return this.modified;\r\n    }\r\n            \r\n    // Очистить клетку, если занята        \r\n    public ClearCell(x: number, y: number) {\r\n        let key = x * Cell.KEY_GEN_FACTOR + y;\r\n        let c = this.cells.get(key);\r\n        if (c)\r\n            this.RemoveCell(key, c);\r\n    }\r\n\r\n    private RemoveCell(key: number, cl: Cell) {\r\n        this.cells.delete(key);\r\n    }\r\n\r\n\r\n    public IsEvenStep(): boolean {\r\n        return this.stepNum % 2 == 0;\r\n    }\r\n\r\n    public GetStepNum() {\r\n        return this.stepNum;\r\n    }\r\n\r\n    public RunSerie(stepCnt: number) {\r\n        for (let i = 0; i < stepCnt; i++)\r\n            this.Run();\r\n    }\r\n\r\n    public Clear() {\r\n        this.cells.clear();\r\n        this.nextCellKey = 0;\r\n        this.stepNum = 1;\r\n    }\r\n\r\n    public ReverseTimeDirection() {\r\n        if (this.forward)\r\n            this.stepNum--;\r\n        else\r\n            this.stepNum++;\r\n        this.forward = !this.forward;\r\n    }\r\n\r\n    public isForwardTimeDirection() {\r\n        return this.forward;\r\n    }\r\n\r\n    private Run() {\r\n        if (this.forward)\r\n            this.stepNum++;\r\n        else\r\n            this.stepNum--;\r\n        let evenStep = this.stepNum % 2 == 0;\r\n        for (let c_e of this.cells.entries()) {\r\n            let c = c_e[1];\r\n            if (c.prosessedStep != this.stepNum) {\r\n                let xc = c.x;\r\n                let yc = c.y;\r\n                    // позиция ячейки\r\n                let xgc = xc - (((xc % 2 == 0) == evenStep) ? 0 : 1);\r\n                let ygc = yc - (((yc % 2 == 0) == evenStep) ? 0 : 1);\r\n                // другие клетки в ячейке\r\n                let gc00: Cell | undefined;\r\n                let gc11: Cell | undefined;\r\n                let gc01: Cell | undefined;\r\n                let gc10: Cell | undefined;\r\n                let c00: boolean = false, c11: boolean = false, c01: boolean = false, c10: boolean = false;\r\n                gc00 = this.cells.get(xgc * Cell.KEY_GEN_FACTOR + ygc);\r\n                c00 = gc00 != undefined;\r\n                gc11 = this.cells.get((xgc + 1) * Cell.KEY_GEN_FACTOR + (ygc + 1));\r\n                c11 = gc11 != undefined;\r\n                gc01 = this.cells.get(xgc * Cell.KEY_GEN_FACTOR + (ygc + 1));\r\n                c01 = gc01 != undefined;\r\n                gc10 = this.cells.get((xgc + 1) * Cell.KEY_GEN_FACTOR + ygc);\r\n                c10 = gc10 != undefined;\r\n                // определить действие в зависимости от положения \r\n                let cellCnt = (gc00 == null ? 0 : 1) + (gc11 == null ? 0 : 1) + (gc01 == null ? 0 : 1) + (gc10 == null ? 0 : 1);\r\n                if (cellCnt == 1) {\r\n                    // это единственная ячейка - двигать на нечетных шагах по диагонали\r\n                    if (!evenStep) {\r\n                        if (xgc == xc)\r\n                            c.x++;\r\n                        else\r\n                            c.x--;\r\n                        if (ygc == yc)\r\n                            c.y++;\r\n                        else\r\n                            c.y--;\r\n                    }\r\n                }\r\n                else if (cellCnt == 2) {\r\n                    // две ячейки: 6 вариантов инверсии\r\n                    if (c00 && c00 == c11) {\r\n                        // 10\r\n                        // 01\r\n                        gc00!.x++;\r\n                        gc11!.x--;\r\n                    }\r\n                    else if (c01 && c01 == c10) {\r\n                        // 01\r\n                        // 10\r\n                        gc01!.x++;\r\n                        gc10!.x--;\r\n                        //gc01.y--;\r\n                        //gc10.y++;\r\n                    }\r\n                    else if (c00 && c00 == c10) {\r\n                        // 11\r\n                        // 00\r\n                        gc00!.y++;\r\n                        gc10!.y++;\r\n                    }\r\n                    else if (c01 && c01 == c11) {\r\n                        // 00\r\n                        // 11\r\n                        gc01!.y--;\r\n                        gc11!.y--;\r\n                    }\r\n                    else if (c00 && c00 == c01) {\r\n                        // 10\r\n                        // 10\r\n                        gc00!.x++;\r\n                        gc01!.x++;\r\n                    }\r\n                    else {\r\n                        // 01\r\n                        // 01\r\n                        gc10!.x--;\r\n                        gc11!.x--;\r\n                    }\r\n                }\r\n                else if (cellCnt == 3) {\r\n                    if (evenStep) {\r\n                        if (!c00) {\r\n                            gc11!.x--;\r\n                            gc11!.y--;\r\n                        }\r\n                        else if (!c11) {\r\n                            gc00!.x++;\r\n                            gc00!.y++;\r\n                        }\r\n                        else if (!c01) {\r\n                            gc10!.x--;\r\n                            gc10!.y++;\r\n                        }\r\n                        else {\r\n                            gc01!.x++;\r\n                            gc01!.y--;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (c00)\r\n                    gc00!.prosessedStep = this.stepNum;\r\n                if (c11)\r\n                    gc11!.prosessedStep = this.stepNum;\r\n                if (c01)\r\n                    gc01!.prosessedStep = this.stepNum;\r\n                if (c10)\r\n                    gc10!.prosessedStep = this.stepNum;\r\n            }\r\n        }\r\n        let cellsNew = new Map<number, Cell>();\r\n        for (let c_e of this.cells.entries()) {\r\n            let c = c_e[1];\r\n            cellsNew.set(c.x * Cell.KEY_GEN_FACTOR + c.y, c);\r\n        }\r\n        this.cells = cellsNew;        \r\n    }\r\n\r\n    public GetCellsCount(): number {\r\n        return this.cells.size;\r\n    }\r\n\r\n    public GetCell(x: number, y: number): Cell | undefined {        \r\n        return this.cells.get(x * Cell.KEY_GEN_FACTOR + y);\r\n    }\r\n\r\n    public FindInArea(rectangle: CRect): Cell[] {\r\n        let result: Cell[] = [];\r\n        for (let c of this.cells.entries()) {\r\n            let cell = c[1];\r\n            if (rectangle.ContainsInXY(cell.x, cell.y))\r\n                result.push(cell);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public DeleteCells(deleted: Cell[]) {        \r\n        for (let c of deleted) \r\n            this.cells.delete(c.GetKey());\r\n    }\r\n\r\n    public MoveCellsTo(cls: Cell[], dx: number, dy: number) {\r\n        /*foreach(var c in cls)\r\n        cells.Remove(c.GetKey());\r\n        foreach(var c in cls)\r\n        {\r\n            c.x += dx;\r\n            c.y += dy;\r\n        }\r\n        foreach(var c in cls)\r\n        cells.Add(c.GetKey(), c);*/\r\n    }\r\n\r\n    public SetThisTimeAsZero() {\r\n        if (this.stepNum == 1)\r\n            return;\r\n        this.stepNum = 1;\r\n        this.forward = true;\r\n        for (let c of this.cells.values())\r\n            c.prosessedStep = 1;\r\n    }\r\n\r\n    public IsZeroTime(): boolean {\r\n        return this.stepNum == 1;\r\n    }\r\n\r\n    public RunToZeroTime() {\r\n        if (!this.forward) {\r\n            this.ReverseTimeDirection();\r\n            if (this.IsEvenStep())\r\n                this.RunSerie(1);\r\n        }\r\n        if (this.stepNum == 1)\r\n            return;\r\n        let distToZero = Math.abs(this.stepNum - 1);        \r\n        if (this.stepNum > 1) \r\n            this.ReverseTimeDirection();\r\n         this.RunSerie(distToZero);\r\n         this.SetThisTimeAsZero();\r\n    }\r\n\r\n    public MakeSnapshot(): CWorldSnapshot {        \r\n        let resultCells: Cell[] = [];\r\n        for (let value of this.cells.values()) {\r\n            resultCells.push(value.Clone());\r\n        }        \r\n        return { cells: resultCells };\r\n    }\r\n\r\n    public LoadSnapshot(snapshot: CWorldSnapshot) {\r\n        this.Clear();\r\n        this.stepNum = 1;\r\n        this.forward = true;\r\n        for (let c of snapshot.cells) {\r\n            c.prosessedStep = this.stepNum;\r\n            this.cells.set(c.x * Cell.KEY_GEN_FACTOR + c.y, c.Clone());\r\n        }\r\n    }\r\n\r\n    public TestInit() {\r\n        this.AddCell(10, 10);\r\n        this.AddCell(11, 11);\r\n        this.AddCell(10, 11);\r\n        this.AddCell(12, 11);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CrittersWorldSerializer {\r\n\r\n    public SerializeCells(w: CrittersWorld): number[] {\r\n        let result = [];\r\n        for (let c of w.getCells()) {            \r\n            result.push(c.x);\r\n            result.push(c.y);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public DeserializeCells(cellsData: number[], cw: CrittersWorld) {        \r\n        for (let n = 0; n < cellsData.length; n=n+2) {\r\n            cw.AddCell(cellsData[n], cellsData[n + 1]);\r\n        }\r\n    }\r\n}\r\n\r\nexport class Cell {\r\n    public constructor(id: number, x: number, y: number, procStep: number) {\r\n        this.id = id;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.prosessedStep = procStep;\r\n    }\r\n\r\n    public static KEY_GEN_FACTOR = 1000000000;\r\n    \r\n    // Уникальный ключ    \r\n    public id: number;\r\n\r\n    public x: number;\r\n    public y: number;\r\n    public prosessedStep: number;\r\n \r\n    public GetKey(): number\r\n    {\r\n        return this.x * Cell.KEY_GEN_FACTOR + this.y;\r\n    }\r\n\r\n    public MoveTo(toX: number, toY: number)\r\n    {\r\n        this.x = toX;\r\n        this.y = toY;\r\n    }\r\n\r\n    public Clone(): Cell {\r\n        return new Cell(this.id, this.x, this.y, this.prosessedStep);\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CRect {\r\n    public constructor(x: number, y: number, width: number, height: number) {\r\n        this.X = x;\r\n        this.Y = y;\r\n        this.Width = width;\r\n        this.Height = height;\r\n    }\r\n\r\n    public Width: number;\r\n    public Height: number;\r\n    public X: number;\r\n    public Y: number;\r\n\r\n    public GetTop(): number { return this.Y; }\r\n    public GetRight(): number { return this.X + this.Width; }\r\n    public GetLeft(): number { return this.X; }\r\n    public GetBottom(): number { return this.Y + this.Height; }\r\n\r\n    public ContainsInXY(x: number, y: number): boolean {\r\n        return x >= this.X && x < this.X + this.Width && y >= this.Y && y < this.Y + this.Height;\r\n    }\r\n\r\n    public Contains(p: CPoint): boolean {\r\n        return p.X >= this.X && p.X < this.X + this.Width && p.Y >= this.Y && p.Y < this.Y + this.Height;\r\n    }\r\n}\r\n\r\nexport class CPoint {\r\n    public constructor(x: number, y: number) {\r\n        this.X = x;\r\n        this.Y = y;\r\n    }\r\n    public X: number;\r\n    public Y: number;\r\n\r\n    public dist(p: CPoint) {\r\n        return Math.sqrt((this.X - p.X) * (this.X - p.X) + (this.Y - p.Y) * (this.Y - p.Y));\r\n    }\r\n\r\n}\r\n\r\nexport enum WorldCangesType {\r\n    cellsEditing,\r\n    frameChanging,\r\n    toolsChanging,\r\n    loaded,\r\n    executed\r\n}","import { Injectable } from \"@angular/core\";\r\nimport { timeInterval } from \"rxjs\";\r\nimport { CrittersWorld, WorldCangesType } from \"./CrittersWorld\";\r\nimport { CWorldSnapshot } from \"./CWorldSnapshot\";\r\n\r\n@Injectable()\r\nexport class ZeroTimeController {\r\n    constructor(private world: CrittersWorld) {\r\n        world.changesSubject.subscribe(ch => {\r\n            if (ch.includes(WorldCangesType.cellsEditing) && !world.IsZeroTime())\r\n                this.wasEditedAtNotZeroTime = true;\r\n            if (ch.includes(WorldCangesType.loaded))\r\n                this.wasEditedAtNotZeroTime = false;\r\n            if (ch.includes(WorldCangesType.cellsEditing) && world.IsZeroTime())\r\n                this.wasEditedAtZeroTime = true;            \r\n        });\r\n    }\r\n\r\n    snapshot: CWorldSnapshot | undefined;\r\n    wasEditedAtNotZeroTime: boolean = false;\r\n    wasEditedAtZeroTime: boolean = false;\r\n\r\n    public setThisTimeAsZero() {        \r\n        if (this.world.IsEvenStep())\r\n            return;\r\n        this.snapshot = this.world.MakeSnapshot();        \r\n        this.world.SetThisTimeAsZero();\r\n        this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n    }\r\n\r\n    public goToZeroTime() {        \r\n        if (this.wasEditedAtNotZeroTime) {\r\n            this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n            this.world.RunToZeroTime();\r\n            this.snapshot = this.world.MakeSnapshot();\r\n            this.wasEditedAtZeroTime = false;\r\n            this.wasEditedAtNotZeroTime = false;\r\n        }\r\n        else if (this.snapshot) {\r\n            this.world.LoadSnapshot(this.snapshot);\r\n            this.wasEditedAtZeroTime = false;            \r\n            this.wasEditedAtNotZeroTime = false;\r\n            this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n        }                \r\n    }\r\n\r\n    public beforeZeroTimePass() {\r\n        if (!this.world.IsZeroTime() || !this.world.isForwardTimeDirection())\r\n            return;\r\n        if (this.wasEditedAtZeroTime) {\r\n            this.snapshot = this.world.MakeSnapshot();\r\n            this.wasEditedAtZeroTime = false;\r\n        }\r\n        \r\n    }\r\n\r\n\r\n}","import { Component, OnInit } from '@angular/core';\r\nimport { bufferTime } from 'rxjs';\r\nimport { CrittersEditController } from '../CEditController/CrittersEditController';\r\nimport { CEditModel } from '../CEditModel';\r\nimport { CrittersView } from '../CrittersView';\r\nimport { CrittersWorld } from '../CrittersWorld';\r\n\r\n@Component({\r\n    selector: 'app-critters-canvas',\r\n    templateUrl: \"critters-canvas.component.html\",\r\n    styles: [\r\n    ]\r\n})\r\nexport class CrittersCanvasComponent implements OnInit {\r\n\r\n    constructor(private editController: CrittersEditController, private crittersView: CrittersView,\r\n        private editModel: CEditModel, private crittersWorld: CrittersWorld) {\r\n    }\r\n\r\n    _canvas!: HTMLCanvasElement;\r\n\r\n    ngOnInit(): void {\r\n        this._canvas = document.getElementById(\"c_canvas\") as HTMLCanvasElement;\r\n        this.crittersWorld.changesSubject.pipe(bufferTime(1 / 50.0)).subscribe((n) => this.crittersView.paint(this._canvas));\r\n        this.editModel.changesSubject.pipe(bufferTime(1 / 50.0)).subscribe((n) => this.crittersView.paint(this._canvas));\r\n        this.crittersView.paint(this._canvas)\r\n    }    \r\n\r\n    onResized(event: any) {\r\n        this.crittersView.paint(this._canvas);\r\n    }\r\n\r\n    onMouseDown(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseDownHandler(event);\r\n    }\r\n\r\n    onMouseUp(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseUpHandler(event);\r\n    }\r\n\r\n    onMouseMove(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseMoveHandler(event);\r\n    }\r\n\r\n    onMouseWheel(event: any) {\r\n        event.preventDefault();\r\n        this.editController.mouseWheelHandler(event);\r\n    }\r\n\r\n    onTouchStart(event: any) {\r\n        event.preventDefault();\r\n        this.editController.touchStartHandler(event);\r\n    }\r\n\r\n    onTouchEnd(event: any) {\r\n        event.preventDefault();\r\n        this.editController.touchEndHandler(event);\r\n    }\r\n\r\n    onTouchMove(event: any) {\r\n        event.preventDefault();\r\n        this.editController.touchMoveHandler(event);\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n","<canvas id=\"c_canvas\" style=\"position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background-color: white\"        \r\n        (mousedown)=\"onMouseDown($event)\"\r\n        (mouseup)=\"onMouseUp($event)\"\r\n        (mousemove)=\"onMouseMove($event)\"\r\n        (wheel)=\"onMouseWheel($event)\"\r\n        (touchstart)=\"onTouchStart($event)\"\r\n        (touchend)=\"onTouchEnd($event)\"\r\n        (touchmove)=\"onTouchMove($event)\"\r\n        >\r\n</canvas>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CrittersWorld } from '../CrittersWorld';\r\nimport { CTimeController } from '../CTimeController';\r\nimport { ZeroTimeController } from '../ZeroTimeController';\r\n\r\n@Component({\r\n    selector: 'app-time-control-panel',\r\n    templateUrl: 'time-control-panel.component.html',\r\n    styleUrls: [\"time-control-panel.component.css\"]\r\n})\r\nexport class TimeControlPanelComponent implements OnInit {\r\n\r\n    constructor(private timeController: CTimeController, private zeroTimeController: ZeroTimeController, private world: CrittersWorld) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        /*this.timeController.onZeroState(() => {\r\n            this.speed = 0;\r\n            this.timeController.setSpeed(0)\r\n        }\r\n        );*/\r\n    }\r\n\r\n    readonly MAX_SPEED = 1030;\r\n\r\n    public speed: number = 0;\r\n\r\n    public timeDirectionForward: boolean = true;\r\n\r\n    onStepOrStop() {\r\n        if (this.speed == 0) {\r\n            this.timeController.step();\r\n        }\r\n        else {\r\n            this.speed = 0;\r\n            this.timeController.setSpeed(0)\r\n        }\r\n    }\r\n\r\n    onRunOrFaster() {\r\n        if (this.speed == 0)\r\n            this.speed = 1;\r\n        else {            \r\n            if (this.speed * 2 <= this.MAX_SPEED)\r\n                this.speed = this.speed * 2;\r\n        }\r\n        this.timeController.setSpeed(this.speed);\r\n    }\r\n\r\n    onReverseTime() {\r\n        console.log(\"onReverseTime\");\r\n        this.timeDirectionForward = !this.timeDirectionForward;\r\n        this.timeController.setTimeDirection(this.timeDirectionForward);\r\n    }\r\n\r\n    onToStart() {\r\n        this.speed = 0;\r\n        this.timeController.setSpeed(0);\r\n        this.timeDirectionForward = true;\r\n        this.timeController.timeForward = true;       \r\n        this.zeroTimeController.goToZeroTime();\r\n    }\r\n\r\n\r\n\r\n}\r\n","<div class=\"p-3\">\r\n    <button (click)=\"onStepOrStop()\" class=\"btn btn-outline-primary m-1\">\r\n        <i [ngClass]=\"speed==0?(timeDirectionForward?'fas fa-forward-step':'fas fa-backward-step'):'fas fa-stop'\"></i>\r\n    </button>\r\n    <button (click)=\"onRunOrFaster()\" class=\"btn btn-outline-primary m-1\" [style.font-size]=\"speed>99?'12px':'18px'\" >{{speed+\"  \"}}\r\n            <i [ngClass]=\"timeDirectionForward?'fas fa-forward fs-6':'fas fa-backward fs-6'\"></i></button>\r\n    <button (click)=\"onReverseTime()\" class=\"btn btn-outline-primary m-1\">\r\n            <i [ngClass]=\"timeDirectionForward?'fas fa-rotate-back':'fas fa-rotate-forward'\"></i></button>\r\n    <button (click)=\"onToStart()\" class=\"btn btn-outline-primary m-1\">\r\n        <i class=\"fas fa-caret-right\"></i>\r\n        0\r\n        <i class=\"fas fa-caret-left\"></i>\r\n    </button>    \r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, lastValueFrom, Subject } from 'rxjs';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class LoginService {\r\n\r\n    constructor(private http: HttpClient) {\r\n        this.getUserInfo().then((ui) => this.userInfo.next(ui));\r\n    }\r\n\r\n    public readonly userInfo: BehaviorSubject<UserInfo> = new BehaviorSubject<UserInfo>({ name: \"\", signedIn: false, admin: false });    \r\n\r\n    public async getUserInfo(): Promise<UserInfo> {\r\n        return await lastValueFrom(this.http.get<UserInfo>(\"/account/userinfo\"));\r\n    }\r\n\r\n    async Logout() {\r\n        var success = await lastValueFrom(this.http.get(\"/account/logout\"));\r\n        if (success)\r\n            this.userInfo.next({ name: \"\", signedIn: false, admin: false });\r\n    }    \r\n\r\n    async Login(emailOrName: string, password: string): Promise<boolean> {\r\n        let isEmail = emailOrName.indexOf('@') != -1;\r\n        if (await lastValueFrom(this.http.post<boolean>(\"/account/Login\", { UserName: isEmail ? null : emailOrName, Mail: isEmail ? emailOrName : null, password: password }))) {\r\n            let userInfo = await lastValueFrom(this.http.get<UserInfo>(\"/account/userinfo\"));\r\n            this.userInfo.next(userInfo);\r\n            return true;\r\n        }\r\n        else return false;\r\n    }\r\n\r\n}\r\n\r\nexport class UserInfo {\r\n    name!: string;\r\n    signedIn!: boolean;\r\n    admin!: boolean;\r\n}\r\n","import { Directive, ViewContainerRef } from '@angular/core';\r\nimport { LoginComponent } from './login.component';\r\nimport { RegistrationComponent } from './registration.component';\r\n\r\n@Directive({\r\n  selector: '[component-container]',\r\n})\r\nexport class ComponentContainerDirective {\r\n    constructor(public viewContainerRef: ViewContainerRef) { }\r\n\r\n    public showLoginDialog(resultCallBack: (result: string) => void) {\r\n        let login = this.viewContainerRef.createComponent(LoginComponent);\r\n        login.instance.result.subscribe(async evt => {\r\n            this.viewContainerRef.clear();\r\n            if (evt == 'register') {\r\n                let register = this.viewContainerRef.createComponent(RegistrationComponent);\r\n                register.instance.result.subscribe(evt => {\r\n                    this.viewContainerRef.clear();\r\n                });\r\n            }\r\n            else\r\n                resultCallBack(evt);\r\n        });        \r\n    }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { lastValueFrom } from 'rxjs';\r\nimport { LoginService } from '../services/login.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: 'login.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private loginService: LoginService) { }\r\n\r\n    @Output() result = new EventEmitter<string>();\r\n\r\n    loginFailed: boolean = false;\r\n\r\n    ngOnInit(): void {\r\n    }    \r\n\r\n    async onOkButton(emailOrName: string, password: string) {\r\n        var res = await this.loginService.Login(emailOrName, password);        \r\n        console.log(res);\r\n        if (res)\r\n            this.result.emit(\"ok\");\r\n        else {\r\n            this.loginFailed = true;\r\n            console.log(\"Login was not successful\");\r\n        }\r\n    }\r\n\r\n    onCancelButton() {\r\n        this.result.emit(\"cancel\");\r\n    }\r\n\r\n    onRegisterButton() {\r\n        this.result.emit(\"register\");\r\n    }\r\n\r\n}\r\n\r\n\r\n","<div class=\"modal\"\r\n     tabindex=\"-1\"\r\n     role=\"dialog\"\r\n     [ngStyle]=\"{'display':'block'}\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h4 class=\"modal-title\">Login</h4>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <p class=\"text-danger\" [hidden]=\"!loginFailed\">Incorrect password or login</p>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"emailInLogin\" class=\"form-label\">User name or email</label>\r\n                    <input #nameInput type=\"text\" class=\"form-control\" placeholder=\"example@mail.com\" aria-label=\"Email\" aria-describedby=\"basic-addon2\">                           \r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"passwordInLogin\" class=\"form-label\">Password</label>\r\n                    <input #passInput type=\"password\" autocomplete=\"off\" class=\"form-control\" id=\"passwordInLogin\" \r\n                           aria-label=\"Password\" aria-describedby=\"basic-addon2\">                           \r\n                </div>\r\n                <a [routerLink]=\"[]\" class=\"link-primary float-end\" (click)=\"onRegisterButton()\">Register</a>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\"  class=\"btn btn-outline-primary\"\r\n                        (click)=\"onOkButton(nameInput.value, passInput.value)\">\r\n                    Sign in\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-outline-primary\"\r\n                        (click)=\"onCancelButton()\">\r\n                    Cancel\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport { lastValueFrom } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: 'registration.component.html',\r\n  styles: [\r\n  ]\r\n})\r\nexport class RegistrationComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient) {}\r\n\r\n    @Output() result = new EventEmitter<String>();\r\n\r\n    registrationFailed: boolean = false;\r\n    registrationError: string = \"\";\r\n    eMail!: string;\r\n    userName!: string;\r\n    password!: string;\r\n    password2!: string;\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n    async onOkButton() {\r\n        let res = await lastValueFrom(this.http.post(\"/account/Register\", { Mail: this.eMail, Password: this.password, UserName: this.userName })) as any;\r\n        console.log(res);\r\n        if (res.success) {\r\n            console.log(\"Registration success\");\r\n            this.result.emit(\"ok\");\r\n        }\r\n        else {\r\n            this.registrationFailed = true;\r\n            this.registrationError = res.errorDescription;\r\n            console.log(\"Registration failed:\" + this.registrationError);\r\n        }        \r\n    }\r\n\r\n    onCancelButton() {\r\n        this.result.emit(\"cancel\");\r\n    }\r\n\r\n}\r\n","<div class=\"modal\"\r\n     tabindex=\"-1\"\r\n     role=\"dialog\"\r\n     [ngStyle]=\"{'display':'block'}\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h4 class=\"modal-title\">Register</h4>\r\n            </div>            \r\n            <div class=\"modal-body\">\r\n                <p class=\"text-danger\" [hidden]=\"!registrationFailed\">{{registrationError}}</p>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"userInRegister\" class=\"form-label\">User name</label>\r\n                    <input #userInput type=\"text\" class=\"form-control\" placeholder=\"User name\" aria-label=\"User name\" aria-describedby=\"basic-addon2\"\r\n                           value={{userName}} id=\"userInRegister\"\r\n                           (input)=\"userName = userInput.value\">\r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"emailInRegister\" class=\"form-label\">Email</label>\r\n                    <input #nameInput type=\"email\" class=\"form-control\" placeholder=\"Email\" aria-label=\"Email\" aria-describedby=\"basic-addon2\"\r\n                           value={{eMail}} id=\"emailInRegister\"\r\n                           (input)=\"eMail = nameInput.value\">\r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"passwordInRegister\" class=\"form-label\">Password</label>\r\n                    <input #passInput type=\"password\" class=\"form-control\" aria-label=\"Password\" aria-describedby=\"basic-addon2\"\r\n                           value={{password}} id=\"passwordInRegister\"\r\n                           (input)=\"password = passInput.value\">\r\n                </div>\r\n                <div #titleinput class=\"mb-3\">\r\n                    <label for=\"passwordInRegister2\" class=\"form-label\">Repeat password</label>\r\n                    <input #passInput2 type=\"password\" class=\"form-control\" aria-label=\"Repeat password\" aria-describedby=\"basic-addon2\"\r\n                           value={{password2}} id=\"passwordInRegister2\"\r\n                           (input)=\"password2 = passInput2.value\">\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-primary\"\r\n                        (click)=\"onOkButton()\">\r\n                    Register\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-primary\"\r\n                        (click)=\"onCancelButton()\">\r\n                    Cancel\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { lastValueFrom } from 'rxjs/internal/lastValueFrom';\r\nimport { CEditModel } from '../critters/CEditModel';\r\nimport { CrittersWorld, CrittersWorldSerializer, WorldCangesType } from '../critters/CrittersWorld';\r\nimport { CrittersView } from '../critters/CrittersView';\r\nimport { ComponentContainerDirective } from './component-container.directive';\r\nimport { CTimeController } from '../critters/CTimeController';\r\nimport { ZeroTimeController } from '../critters/ZeroTimeController';\r\nimport { LoginService } from '../services/login.service';\r\nimport { SandBoxCrittersEditController } from '../critters/CEditController/SandBoxCrittersEditController';\r\nimport { CrittersEditController } from '../critters/CEditController/CrittersEditController';\r\n\r\n@Component({\r\n    selector: 'app-sandbox',\r\n    templateUrl: 'sandbox.component.html',\r\n    styles: [\r\n    ],\r\n    providers: [CrittersWorld, { provide: CrittersEditController, useClass: SandBoxCrittersEditController }, CEditModel, CrittersView, CTimeController, ZeroTimeController]\r\n})\r\nexport class SandboxComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private router: Router, private world: CrittersWorld,\r\n        private zeroTimeController: ZeroTimeController, private loginService: LoginService) {\r\n    }        \r\n\r\n    // --------------------------------------------------------------    \r\n\r\n    savePopup: SavePopup = new SavePopup();\r\n\r\n    loadPopup: LoadPopup = new LoadPopup();    \r\n\r\n    @ViewChild(ComponentContainerDirective, { static: true }) dialogsHost!: ComponentContainerDirective;    \r\n\r\n    ngOnInit(): void {\r\n        this.world.TestInit();\r\n        this.zeroTimeController.setThisTimeAsZero();\r\n        this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n        console.log(\"sandbox ngOnInit()\")        \r\n    }\r\n\r\n    public async onSaveButton() {\r\n        if ((await this.loginService.getUserInfo()).signedIn)\r\n            this.savePopup.open(this.http, this.world);\r\n        else {\r\n            this.dialogsHost.showLoginDialog(async (result) => {\r\n                if (result == \"ok\")\r\n                    if ((await this.loginService.getUserInfo()).signedIn)\r\n                        this.savePopup.open(this.http, this.world);\r\n            });\r\n        }        \r\n    }\r\n\r\n    public async onLoadButton() {\r\n        if ((await this.loginService.getUserInfo()).signedIn)            \r\n            this.loadPopup.open(this.http, (w) => this.deserializeWorld(w));\r\n        else {\r\n            this.dialogsHost.showLoginDialog(async (result) => {\r\n                if (result == \"ok\")\r\n                    if ((await this.loginService.getUserInfo()).signedIn)\r\n                        this.loadPopup.open(this.http, (w) => this.deserializeWorld(w));\r\n            });\r\n        }                \r\n    }\r\n\r\n    private deserializeWorld(data: number[]) {\r\n        this.world.Clear();        \r\n        for (let i = 0; i < data.length; i = i + 2) {\r\n            console.log(\"add cell\", data[i], data[i + 1]);\r\n            this.world.AddCell(data[i], data[i + 1]);\r\n        }\r\n        this.zeroTimeController.setThisTimeAsZero();\r\n        this.world.resetModificationFlag();\r\n        this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n    }\r\n\r\n\r\n    public onNext() {\r\n        console.log(\"onNext\");\r\n        this.world.RunSerie(1);\r\n        this.world.notifyAboutChanges([WorldCangesType.executed]);\r\n    }\r\n\r\n    public getExitConfirmText(): string | undefined {\r\n        return \"There are unsaved changes. Do you really want to leave Sandbox?\";\r\n    }\r\n\r\n    public exitConfirmRequired() {\r\n        return this.world.wasModified();\r\n    }    \r\n\r\n\r\n}\r\n\r\nclass SavePopup {\r\n\r\n    titles: SandboxWorldTitleModel[] = [];\r\n    saveName: string = \"\";\r\n    selectedSave: SandboxWorldTitleModel | null = null;\r\n    http!: HttpClient;\r\n    world!: CrittersWorld;\r\n\r\n    savePopupDisplayStyle: string = \"none\";\r\n\r\n    open(http: HttpClient, world: CrittersWorld) {        \r\n        // some slots can be free, some - busy\r\n        // we show all array whith 10 slots;\r\n        // empty slots marked in list and have name ---------\r\n        // user can select slot and change name in dialog if neccessary;\r\n        // name applyed when user save world.        \r\n        this.http = http;\r\n        this.world = world;\r\n        this.titles = [];\r\n        this.saveName = \"\";\r\n        this.selectedSave = null;\r\n        http.get<SandboxWorldTitleModel[]>(\"/sandboxworlds/titles\").subscribe(titles => {\r\n            this.titles = this.ToSlotList(titles);\r\n        });\r\n        this.savePopupDisplayStyle = \"block\";        \r\n    }\r\n\r\n    ToSlotList(titles: SandboxWorldTitleModel[]): SandboxWorldTitleModel[] {\r\n        let result: SandboxWorldTitleModel[] = []\r\n        for (let i = 1; i <= 10; i++)\r\n            result.push({ id: -1, slot: i, name: \"<empty>\" });\r\n        for (let t of titles)\r\n            result[t.slot - 1] = t;\r\n        return result;\r\n    }\r\n\r\n    onSlotSelect(slot: any) {\r\n        this.selectedSave = this.titles[slot - 1];\r\n        if (this.selectedSave != null && this.selectedSave != undefined) {\r\n            this.saveName = this.selectedSave.id == -1 ? (\"World \" + this.selectedSave.slot) : this.selectedSave.name;\r\n        }\r\n    }\r\n\r\n    close() {\r\n        this.savePopupDisplayStyle = \"none\";\r\n    }\r\n\r\n    async onPopupOk() {\r\n        console.log(\"onSavePopupOk\");\r\n        this.savePopupDisplayStyle = \"none\";\r\n        // save current world to slot        \r\n        this.selectedSave!.name = this.saveName;\r\n        //this.selectedSave!.data = this.world.Serialize();\r\n        await this.SaveWorld(this.selectedSave);\r\n        console.log(\"after save\");\r\n    }\r\n\r\n    async SaveWorld(worldTitle: SandboxWorldTitleModel | null) {\r\n        let s = new CrittersWorldSerializer();\r\n        let cellsData = s.SerializeCells(this.world);\r\n        let result = await lastValueFrom(this.http.post(\"/sandboxworlds/savetoslot\", { slot: worldTitle?.slot, newName: worldTitle?.name, cellsData: cellsData }));\r\n        console.log(result);\r\n        if (result)\r\n            this.world.resetModificationFlag();\r\n    }\r\n\r\n}\r\n\r\nclass LoadPopup {\r\n\r\n    titles: SandboxWorldTitleModel[] = [];    \r\n    selectedLoad: SandboxWorldTitleModel | null = null;\r\n    http!: HttpClient;    \r\n    resultCallback!: (cellsData: number[]) => void;\r\n\r\n    loadPopupDisplayStyle: string = \"none\";\r\n\r\n    open(http: HttpClient, resultCallback: (cellsData: number[]) => void) {    \r\n        this.http = http;\r\n        this.resultCallback = resultCallback;\r\n        this.titles = [];   \r\n        this.selectedLoad = null;\r\n        http.get<SandboxWorldTitleModel[]>(\"/sandboxworlds/titles\").subscribe(titles => {\r\n            this.titles = this.ToSlotList(titles);\r\n        });\r\n        this.loadPopupDisplayStyle = \"block\";\r\n    }\r\n\r\n    ToSlotList(titles: SandboxWorldTitleModel[]): SandboxWorldTitleModel[] {\r\n        let result: SandboxWorldTitleModel[] = []\r\n        for (let i = 1; i <= 10; i++)\r\n            result.push({ id: -1, slot: i, name: \"<empty>\" });\r\n        for (let t of titles)\r\n            result[t.slot - 1] = t;\r\n        return result;\r\n    }\r\n\r\n    onSlotSelect(slot: any) {\r\n        this.selectedLoad = this.titles[slot - 1];        \r\n    }\r\n\r\n    close() {\r\n        this.loadPopupDisplayStyle = \"none\";\r\n    }\r\n\r\n    async onPopupOk() {\r\n        console.log(\"onLoadPopupOk\");\r\n        this.loadPopupDisplayStyle = \"none\";\r\n        // load selected world \r\n        let loaded = await lastValueFrom(this.http.get(\"/sandboxworlds/loadfromslot?slot=\" + this.selectedLoad?.slot));\r\n        console.log(\"after load\", (loaded as any).cellsData);\r\n        this.resultCallback((loaded as any).cellsData);\r\n    }\r\n\r\n}\r\n\r\n\r\nclass SandboxWorldTitleModel {\r\n    id: number = -1;\r\n    slot: number = 0;\r\n    name: string = \"\";    \r\n    }\r\n","<div style=\"background: black; height: 100vh; display: grid;\r\n       grid-template-rows: max-content auto;\">\r\n    <div style=\"background: rgb(48, 59, 68); color: white; \">\r\n        <button class=\"btn btn-outline-light m-2\" routerLink=\"/home\"><i class=\"fas fa-home\"></i> Home</button>\r\n        <button class=\"btn btn-outline-light m-2\" (click)=\"onSaveButton()\">Save</button>\r\n        <button class=\"btn btn-outline-light m-2\" (click)=\"onLoadButton()\">Load</button>\r\n    </div>\r\n    <div style=\"background-color: white; position: relative; overflow: hidden\">\r\n        <app-critters-canvas></app-critters-canvas>\r\n        <app-time-control-panel class=\"m-1\" style=\"position: absolute; right:30px; bottom: 30px;\"></app-time-control-panel>        \r\n    </div>\r\n\r\n    <div style=\"position: fixed\">\r\n        <ng-template component-container style=\"position: fixed\"></ng-template>\r\n    </div>\r\n\r\n    <div class=\"modal\"\r\n         tabindex=\"-1\"\r\n         role=\"dialog\"\r\n         [ngStyle]=\"{'display':savePopup.savePopupDisplayStyle}\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h4 class=\"modal-title\">Save world</h4>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <select #saveTitlesSel multiple size=\"10\" class=\"form-select\" aria-label=\"Select slot to save\"\r\n                            style=\"overflow-y: auto;\"\r\n                            (change)=\"savePopup.onSlotSelect(saveTitlesSel.value)\">\r\n                        <option value={{title.slot}} *ngFor=\"let title of savePopup.titles\">{{title.name}}</option>\r\n                    </select>\r\n                    <br />\r\n                    <div #titleinput class=\"input-group mb-3\">\r\n                        <input #nameInput type=\"text\" class=\"form-control\" placeholder=\"World name\" aria-label=\"Recipient's username\" aria-describedby=\"basic-addon2\"\r\n                               value={{savePopup.saveName}}\r\n                               [disabled]=\"savePopup.selectedSave==null\"\r\n                               (input)=\"savePopup.saveName = nameInput.value\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"savePopup.onPopupOk()\"\r\n                            [disabled]=\"savePopup.selectedSave==null\"\r\n                            >\r\n                        Save\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"savePopup.close()\">\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal\"\r\n         tabindex=\"-1\"\r\n         role=\"dialog\"\r\n         [ngStyle]=\"{'display':loadPopup.loadPopupDisplayStyle}\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h4 class=\"modal-title\">Load world</h4>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <select #loadTitlesSel multiple size=\"10\" class=\"form-select\" aria-label=\"Select world\"\r\n                            style=\"overflow-y: auto;\"\r\n                            (change)=\"loadPopup.onSlotSelect(loadTitlesSel.value)\">\r\n                        <option value={{title.slot}} *ngFor=\"let title of loadPopup.titles\">{{title.name}}</option>\r\n                    </select>\r\n                    <br />\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"loadPopup.onPopupOk()\"\r\n                            [disabled]=\"loadPopup.selectedLoad==null || loadPopup.selectedLoad.id == -1\">\r\n                        Load\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                            (click)=\"loadPopup.close()\">\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { LoginService, UserInfo } from '../services/login.service';\r\nimport { ComponentContainerDirective } from './component-container.directive';\r\nimport { LoginComponent } from './login.component';\r\nimport { RegistrationComponent } from './registration.component';\r\n\r\n@Component({\r\n  selector: 'app-startpage',\r\n    templateUrl: \"startpage.component.html\",\r\n  styles: [\r\n  ]\r\n})\r\nexport class StartpageComponent implements OnInit {\r\n\r\n    constructor(private loginService: LoginService) { }\r\n\r\n  @ViewChild(ComponentContainerDirective, { static: true }) dialogsHost!: ComponentContainerDirective;\r\n\r\n    userInfo: UserInfo = { name: \"\", signedIn: false, admin: false };\r\n\r\n    async ngOnInit() {\r\n        this.loginService.userInfo.subscribe((ui) => this.userInfo = ui);\r\n        console.log(this.userInfo);\r\n    }\r\n\r\n    Login() {\r\n        this.dialogsHost.showLoginDialog(() => { });\r\n    }\r\n\r\n    async Logout() {\r\n        await this.loginService.Logout();\r\n        this.userInfo = await this.loginService.getUserInfo();\r\n    }\r\n\r\n}\r\n","<div class=\"container-fluid vh-100 p-0\" style=\"background: rgb(79, 90, 110)\">\r\n    <header class=\"container-fluid\" style=\"background-color: rgb(48, 59, 68)\">\r\n        <nav class=\"navbar navbar-expand-lg navbar-dark fs-4\" style=\"background-color: rgb(48, 59, 68); color: white;\">\r\n            <div class=\"container-fluid\">\r\n                <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span class=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n                <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n                    <ul class=\"navbar-nav me-auto mb-2 mb-lg-0 justify-content-between w-50\">\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link active\" aria-current=\"page\" routerLink=\"/home\">Home</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" routerLink=\"/sandbox\">Sandbox</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" routerLink=\"/wiki/article/Contents\">Investigation</a>\r\n                        </li>\r\n                        <li class=\"nav-item\">\r\n                            <a class=\"nav-link\" routerLink=\"/play\">Game</a>\r\n                        </li>\r\n                    </ul>\r\n                    <label *ngIf=\"userInfo.signedIn\" class=\"text-light me-3 fs-5\">{{userInfo.name}}</label>\r\n                    <button *ngIf=\"userInfo.signedIn\" class=\"btn btn-outline-light my-2 my-sm-0\" type=\"submit\" (click)=\"Logout()\"><i class=\"fas fa-sign-out me-2\"></i>Logout</button>\r\n                    <button *ngIf=\"!userInfo.signedIn\" class=\"btn btn-outline-light my-2 my-sm-0\" type=\"submit\" (click)=\"Login()\"><i class=\"fas fa-sign-in me-2\"></i>Login</button>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    </header>\r\n\r\n    <div class=\"container-fluid p-4\" style=\"color: white\">\r\n        Critters is defined on a two-dimensional infinite grid of cells, which may be identified with the integer lattice. As in Conway's Game of Life, at any point in time each cell may be in one of two states: alive or dead. The Critters rule is a block cellular automaton using the Margolus neighborhood. This means that, at each step, the cells of the automaton are partitioned into 2 × 2 blocks and each block is updated independently of the other blocks. The center of a block at one time step becomes the corner of four blocks at the next time step, and vice versa; in this way, the four cells in each block belong to four different 2 × 2 blocks of the previous partition.\r\n        <br> (Wikipedia)\r\n    </div>    \r\n</div>\r\n\r\n<div style=\"position: fixed\">\r\n    <ng-template component-container style=\"position: fixed\"></ng-template>\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CEditModel } from '../../critters/CEditModel';\r\nimport { CrittersWorld, WorldCangesType } from '../../critters/CrittersWorld';\r\nimport { CrittersView } from '../../critters/CrittersView';\r\nimport { CTimeController } from '../../critters/CTimeController';\r\nimport { ZeroTimeController } from '../../critters/ZeroTimeController';\r\nimport { LoginService } from '../../services/login.service';\r\nimport { ViewOnlyCrittersEditController } from '../../critters/CEditController/ViewOnlyCrittersEditController';\r\nimport { CrittersEditController } from '../../critters/CEditController/CrittersEditController';\r\nimport { SandBoxCrittersEditController } from '../../critters/CEditController/SandBoxCrittersEditController';\r\n\r\n@Component({\r\n  selector: 'app-article',\r\n    templateUrl: \"article.component.html\",\r\n  styles: [\r\n    ],\r\n    providers: [CrittersWorld, { provide: CrittersEditController, useClass: ViewOnlyCrittersEditController }, CEditModel, CrittersView,\r\n        CTimeController, ZeroTimeController]\r\n})\r\nexport class ArticleComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private route: ActivatedRoute, private router: Router, private world: CrittersWorld,\r\n        private zeroTimeController: ZeroTimeController,\r\n        private loginService: LoginService) { }\r\n\r\n    article: ArticleModel | null = null; \r\n\r\n    editAvaible: boolean = false;\r\n    deleteAvaible: boolean = false;\r\n    toArchiveAvaible: boolean = false;\r\n\r\n    CellsFieldIsEmpy(): boolean {        \r\n        return (this.article?.cellsData?.length ?? 0)==0;\r\n    }\r\n\r\n    async ngOnInit() {\r\n        this.route.params.subscribe(routeParams => {\r\n            console.log(\"load start\");\r\n            this.http.get<ArticleModel>(\"/article/\" + (routeParams as any).id).subscribe(async article => {                \r\n                this.article = article;\r\n                this.deserializeWorld(article);\r\n                this.zeroTimeController.setThisTimeAsZero();                     \r\n                await this.showAccessibleButtons();\r\n                setInterval(() =>\r\n                    this.world.notifyAboutChanges([WorldCangesType.loaded]));\r\n            });\r\n        });\r\n    }\r\n\r\n    async showAccessibleButtons() {\r\n        \r\n        let userInfo = await this.loginService.getUserInfo();\r\n        if (userInfo != undefined && userInfo.signedIn) {            \r\n            // user can edit article when it in draft/rejected status or if user is admin\r\n            this.editAvaible = \r\n            this.editAvaible = (this.article?.authorName == userInfo.name &&\r\n                [ArticleStatus.draft, ArticleStatus.regected].includes(this.article.status)) || userInfo.admin;\r\n            // user can delete article if he is admin or it is his article\r\n            this.deleteAvaible = this.article?.authorName == userInfo.name || userInfo.admin;\r\n            // user can send article to archive if it approved his article or user is a moderator\r\n            this.toArchiveAvaible = (this.article?.authorName == userInfo.name &&\r\n                this.article.status == ArticleStatus.approved) || userInfo.admin;\r\n        }\r\n    }\r\n\r\n    deserializeWorld(article: ArticleModel) {\r\n        this.world.Clear();\r\n        let data = article.cellsData;\r\n        for (let i = 0; i < data.length; i = i + 2)\r\n            this.world.AddCell(data[i], data[i + 1]);\r\n    }\r\n\r\n    deleteArticle() {\r\n        if (window.confirm(\"A you sure want to delete this article permanently?\")) {\r\n            this.http.delete(\"/article/\" + this.article!.id).subscribe(() => {\r\n                this.router.navigateByUrl(\"/wiki/article/contents\");\r\n            });                \r\n        }\r\n    }\r\n\r\n    toArchive() {\r\n        if (window.confirm(\"A you sure want to move this article to the archive?\")) {\r\n            this.http.put(\"/article/toarchive/\" + this.article!.id, this.article!.id).subscribe(() => {\r\n                this.router.navigateByUrl(\"/wiki/article/contents\");\r\n            });\r\n        }\r\n    }\r\n\r\n    ContentToHTML(content: string | undefined): string | undefined {\r\n        return content == undefined ? content: content.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');               \r\n    }\r\n\r\n}\r\n\r\nexport class ArticleModel {\r\n    public id!: string; \r\n    public name!: string;\r\n    public content!: string;\r\n    public cellsData!: number[];\r\n    public authorName!: string;\r\n    public status!: ArticleStatus;\r\n}\r\n\r\nexport enum ArticleStatus {    \r\n    draft = 1,\r\n    awaitingApproval = 2,\r\n    regected = 3,\r\n    approved = 4,\r\n    archival = 5\r\n}\r\n\r\n","<div style=\"height: 100%; display: grid; position: relative; grid-template-areas: 'area1 area2' 'area1 area2'; \r\n        grid-template-columns: 50% 50%; grid-template-rows: auto 0%\"\r\n     [ngStyle]=\"{'grid-template-columns': CellsFieldIsEmpy()?'100% 0%':'50% 50%'}\">\r\n\r\n    <div style=\"grid-template-rows: 'max-content auto'; color: black; position: relative; \">\r\n        <div class=\"p-3\" style=\"position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; overflow-y: scroll;\">\r\n            <h4>{{article?.name}}<br></h4>\r\n            <div [innerHtml]=\"ContentToHTML(article?.content)\"></div>\r\n        </div>\r\n        <div style=\"position: absolute; bottom: 20px; right: 30px\">\r\n        <button *ngIf=\"editAvaible\" routerLink=\"/wiki/edit/{{article?.id}}\"\r\n                class=\"btn btn-outline-primary me-2\" >\r\n            <i class=\"fas fa-edit me-2\"></i>Edit\r\n        </button>\r\n        <button *ngIf=\"toArchiveAvaible\" (click)=\"toArchive()\"\r\n                class=\"btn btn-outline-primary me-2\">\r\n            <i class=\"fas fa-edit me-2\"></i>To archive\r\n        </button>\r\n        <button *ngIf=\"deleteAvaible\" (click)=\"deleteArticle()\"\r\n                class=\"btn btn-outline-primary\">\r\n            <i class=\"fas fa-edit me-2\"></i>Delete\r\n        </button>\r\n            </div>\r\n    </div>\r\n\r\n    <div style=\"color: black; position: relative;\" [ngStyle]=\"{display: CellsFieldIsEmpy()?'none':'block'}\">\r\n        <app-critters-canvas></app-critters-canvas>\r\n        <app-time-control-panel class=\"m-1\" style=\"position: absolute; right:30px; bottom: 30px;\"></app-time-control-panel>\r\n    </div>\r\n\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ArticleModel, ArticleStatus } from './article.component';\r\n\r\n@Component({\r\n  selector: 'app-articles',\r\n    templateUrl: \"articles.component.html\",\r\n  styles: [\r\n  ]\r\n})\r\n\r\nexport class ArticlesComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private route: ActivatedRoute) { }\r\n\r\n  articles: ArticleTitleModel[] = [];\r\n\r\n    ngOnInit(): void {\r\n        this.route.params.subscribe(routeParams => {\r\n            console.log(routeParams);\r\n            let request = (routeParams as any).request as string;\r\n            if (!request.startsWith('q:'))\r\n                this.http.get<ArticleTitleModel[]>(\"/articles/\" + request).subscribe(articles => {\r\n                    this.articles = articles;\r\n                });\r\n            else\r\n                this.http.get<ArticleTitleModel[]>(\"/articles/search/\" + request.substr(2)).subscribe(articles => {\r\n                    this.articles = articles;\r\n                });\r\n        });\r\n    }\r\n\r\n    getArticleStatusDesc(st: ArticleStatus) {\r\n        if (st == ArticleStatus.draft)\r\n            return \"(Draft)\"\r\n        else if (st == ArticleStatus.archival)\r\n            return \"(In archive)\"\r\n        else if (st == ArticleStatus.awaitingApproval)\r\n            return \"(Awaiting moderation)\"\r\n        else if (st == ArticleStatus.regected)\r\n            return \"(Adjustment required)\"\r\n        else return \"\";\r\n    }\r\n\r\n\r\n}\r\n\r\nclass ArticleTitleModel {\r\n    id!: string;\r\n    name!: string;\r\n    shortContent!: string;\r\n    author!: string;\r\n    editionDate!: Date;\r\n    status!: ArticleStatus;\r\n}\r\n","<div class=\"p-2\" *ngFor=\"let article of articles\">\r\n    <i class=\"fas fa-user\"></i>\r\n    <p style=\"display: inline; margin-left: 6px\"><b>{{article.author}}</b></p>\r\n    <p style=\"display: inline; margin-left: 6px\" class=\"text-muted\">{{article.editionDate | date:'YYYY-MM-dd hh:mm:ss'}}</p>\r\n    <p style=\"display: inline; margin-left: 6px\">{{getArticleStatusDesc(article.status)}}</p>\r\n    <br>\r\n    <a routerLink=\"/wiki/article/{{article.id}}\" class=\"link-primary\">{{article.name?article.name:\"no name\" }}</a>\r\n    <p class=\"text-muted\"><small>{{article.shortContent}}</small></p>\r\n    <hr>\r\n</div>\r\n\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\nimport { lastValueFrom } from 'rxjs';\r\nimport { CrittersWorld, CrittersWorldSerializer, WorldCangesType } from '../../critters/CrittersWorld';\r\nimport { CEditModel } from '../../critters/CEditModel';\r\nimport { CrittersView } from '../../critters/CrittersView';\r\nimport { CTimeController } from '../../critters/CTimeController';\r\nimport { CWorldSnapshot } from '../../critters/CWorldSnapshot';\r\nimport { ZeroTimeController } from '../../critters/ZeroTimeController';\r\nimport { ArticleStatus } from './article.component';\r\nimport { SandBoxCrittersEditController } from '../../critters/CEditController/SandBoxCrittersEditController';\r\nimport { CrittersEditController } from '../../critters/CEditController/CrittersEditController';\r\n\r\n@Component({\r\n  selector: 'app-edit-article',\r\n    templateUrl: \"edit.component.html\",    \r\n  styles: [\r\n    ],\r\n    providers: [CrittersWorld, { provide: CrittersEditController, useClass: SandBoxCrittersEditController }, CEditModel, CrittersView, CTimeController, ZeroTimeController]\r\n})\r\nexport class EditArticleComponent implements OnInit {\r\n\r\n    constructor(private http: HttpClient, private route: ActivatedRoute, private router: Router, private location: Location,\r\n        private world: CrittersWorld, private zeroTimeController: ZeroTimeController) { }    \r\n\r\n    article: ArticleModel = new ArticleModel();\r\n    isNew: boolean = false;\r\n    nameLength: number | undefined = 0;\r\n    contentLength: number | undefined = 0;    \r\n\r\n    ngOnInit(): void {\r\n        this.route.params.subscribe(routeParams => {\r\n            console.log(routeParams);\r\n            if ((routeParams as any).id != 'new')\r\n                this.http.get<ArticleModel>(\"/article/\" + (routeParams as any).id).subscribe(article => {\r\n                    this.article = article;\r\n                    this.world.Clear();\r\n                    let data = article.cellsData;\r\n                    for (let i = 0; i < data.length ; i = i + 2)\r\n                        this.world.AddCell(data[i], data[i + 1]);\r\n                    this.zeroTimeController.setThisTimeAsZero();                    \r\n                    setTimeout(() =>\r\n                        this.world.notifyAboutChanges([WorldCangesType.loaded]));\r\n                });\r\n            else {                    \r\n                this.isNew = true;\r\n                this.article.name = \"\"; ;\r\n                this.article.content = \"\";\r\n                this.world.Clear();\r\n                this.world.notifyAboutChanges([WorldCangesType.loaded]);\r\n            }\r\n        });\r\n    }\r\n\r\n    public async OnSave(name: string, text: string) {\r\n        await this.save(name, text, ArticleStatus.draft);\r\n    }\r\n\r\n    public async OnPublish(name: string, text: string) {\r\n        await this.save(name, text, ArticleStatus.awaitingApproval);\r\n    }\r\n\r\n    public async save(name: string, text: string, status: ArticleStatus) {\r\n        this.article.content = text;\r\n        this.article.name = name;\r\n        this.article.status = status;\r\n        let s = new CrittersWorldSerializer();\r\n        let cellsData = s.SerializeCells(this.world);\r\n        this.article.cellsData = cellsData;\r\n        if (this.isNew) {\r\n            let article: any = await lastValueFrom(await this.http.post(\"/article\", this.article));\r\n            if (article) {\r\n                this.world.resetModificationFlag();\r\n                this.router.navigateByUrl(\"/wiki/article/\" + article.id);\r\n            }\r\n        }\r\n        else {\r\n            await lastValueFrom(await this.http.put<ArticleModel>(\"/article\", this.article));\r\n            this.world.resetModificationFlag();\r\n            this.router.navigateByUrl(\"/wiki/article/\" + this.article.id);            \r\n        }        \r\n    }\r\n\r\n\r\n    public OnDelete() {\r\n        console.log(\"/article/\" + this.article.id);\r\n        this.http.delete(\"/article/\" + this.article.id).subscribe(() => { });\r\n    }\r\n    public OnReject() {\r\n        console.log(\"/article/reject/\" + this.article.id);\r\n        this.http.put(\"/article/reject/\" + this.article.id, null).subscribe(() => { });\r\n    }\r\n    public OnApprove() {\r\n        console.log(\"/article/approve/\" + this.article.id);\r\n        this.http.put(\"/article/approve/\" + this.article.id, null).subscribe(() => { });\r\n    }\r\n\r\n    public exitConfirmRequired(): boolean {\r\n        return this.world.wasModified();\r\n    }\r\n\r\n    public getExitConfirmText(): string | undefined {\r\n        return \"There are unsaved changes. Do you really want to leave this article page?\";\r\n    }\r\n\r\n}\r\n\r\nexport class ArticleModel {\r\n    id!: number;\r\n    name!: string;\r\n    content!: string;\r\n    authorName!: string;\r\n    authorId!: string;\r\n    cellsData!: number[];\r\n    creationDate!: string;\r\n    lastEditionDate!: string;\r\n    approvalDate!: string;\r\n    status!: ArticleStatus;\r\n}\r\n","<div style=\"height:100%; display: grid; position: relative; grid-template-areas: 'area1 area2' 'buttons1 buttons2'; \r\n            grid-template-columns: 50% 50%; grid-template-rows: auto max-content\">\r\n    <div style=\"display: grid; grid-template-rows: 'max-content auto'; grid-area: area1; color: black; position: relative\">\r\n        <div class=\"m-2\">\r\n            <label class=\"form-label\">Article title</label>\r\n            <input #articleName (input)=\"nameLength = articleName?.value?.length\" [value]=\"article? article.name:''\" class=\"form-control\"\r\n                   placeholder=\" name of the configuration or principle\">\r\n            <label class=\"form-label text-danger\" *ngIf=\"(nameLength??0)>80\">the maximum name length is 80 ({{nameLength}})</label>\r\n        </div>\r\n        <div class=\"m-2\" style=\"display: grid; grid-template-rows: 'max-content auto' \">\r\n            <label class=\"form-label\">Article text</label>\r\n            <textarea #articleContent (input)=\"contentLength = articleContent?.value?.length\" [value]=\"article? article.content:''\" \r\n                      class=\"form-control\" placeholder=\"description of the configuration or principle you found\"></textarea>\r\n            <label class=\"form-label text-danger\" *ngIf=\"(contentLength??0)>10000\">the maximum content length is 10000 ({{contentLength}})</label>\r\n        </div>\r\n    </div>\r\n\r\n    <div style=\"background: rgb(255 106 0); grid-area: area2; color: white; position: relative\">\r\n        <app-critters-canvas></app-critters-canvas>\r\n        <app-time-control-panel class=\"m-1\" style=\"position: absolute; right:30px; bottom: 30px;\"></app-time-control-panel>\r\n    </div>\r\n    <div style=\"background: rgb(240, 240, 240); grid-area: buttons1; color: white; position: relative \">\r\n        <button class=\"btn btn-outline-danger m-2\" (click)=\"OnApprove()\">Approve</button>\r\n        <button class=\"btn btn-outline-danger m-2\" (click)=\"OnReject()\">Reject</button>\r\n        <button class=\"btn btn-outline-danger m-2\" (click)=\"OnDelete()\">Delete</button>\r\n    </div>\r\n    <div style=\"background: rgb(240, 240, 240); grid-area: buttons2; position: relative \">\r\n        <button class=\"btn btn-outline-success m-2 float-end\" (click)=\"OnPublish(articleName.value, articleContent.value)\">Publish</button>\r\n        <button class=\"btn btn-outline-success m-2 float-end\" (click)=\"OnSave(articleName.value, articleContent.value)\">Save as draft</button>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Route, Router } from '@angular/router';\r\nimport { LoginService, UserInfo } from '../../services/login.service';\r\nimport { ComponentContainerDirective } from '../component-container.directive';\r\n\r\n@Component({\r\n  selector: 'app-wiki',\r\n  templateUrl: \"wiki.component.html\",\r\n  styles: [\r\n  ]\r\n})\r\nexport class WikiComponent implements OnInit {\r\n\r\n    constructor(private router: Router, private loginService: LoginService) { }\r\n\r\n  @ViewChild(ComponentContainerDirective, { static: true }) dialogsHost!: ComponentContainerDirective;\r\n\r\n    ngOnInit(): void {\r\n        this.loginService.userInfo.subscribe((ui) => this.userInfo = ui);\r\n    }\r\n\r\n    userInfo: UserInfo | null = null;\r\n\r\n    keyPress($event: any, request: string) {\r\n        if ($event.code == \"Enter\")\r\n            this.OnSearch(request);\r\n    }\r\n\r\n    OnSearch(request: string) {\r\n        this.router.navigateByUrl(\"/wiki/articles/q:\" + request);\r\n    }\r\n\r\n    async onCreateArticle() {\r\n        if ((await this.loginService.getUserInfo()).signedIn)\r\n            this.navigateToArticleCreation();\r\n        else {\r\n            this.dialogsHost.showLoginDialog(async (result) => {\r\n                if (result == \"ok\")\r\n                    if ((await this.loginService.getUserInfo()).signedIn)\r\n                        this.navigateToArticleCreation();\r\n            });\r\n        }\r\n    }\r\n\r\n    navigateToArticleCreation() {\r\n        this.router.navigateByUrl(\"/wiki/edit/new\");\r\n    }\r\n\r\n\r\n}\r\n","<div style=\"background: green; height: 100vh; display: grid; position: relative; grid-template-areas: 'header1 header2' 'menu workArea';\r\n            grid-template-columns: 200px auto;\r\n            grid-template-rows: max-content auto\">\r\n    <div style=\"background: rgb(48, 59, 68); grid-area: header1; color: white; position: relative\">\r\n        <button class=\"btn btn-outline-light m-2\" routerLink=\"/home\"><i class=\"fas fa-home\"></i> Home</button>\r\n    </div>\r\n    <div style=\"background: rgb(48, 59, 68); grid-area: header2; color: white; position: relative\">\r\n        <div class=\"input-group mt-2 float-start\" style=\"width: 400px\">\r\n            <input #searchInput class=\"form-control\" placeholder=\"find an article\" aria-label=\"Find\" aria-describedby=\"basic-addon2\"\r\n                   (keyup)=\"keyPress($event, searchInput.value)\">\r\n            <button class=\"btn btn-outline-secondary\" type=\"button\" (click)=\"OnSearch(searchInput.value)\"><i class=\"fas fa-search\"></i></button>\r\n        </div>\r\n        <button class=\"btn btn-success m-2 float-end\" style=\"grid-area: header2\" (click)=\"onCreateArticle()\">Create article</button>\r\n    </div>\r\n    <div style=\"background: rgb(79, 90, 110); width: 200px; grid-area: menu; color: white \">\r\n        <a routerLink='article/Contents' class=\"link-light m-3\" style=\"display: block\">Contents</a>\r\n        <a routerLink='article/Random' class=\"link-light m-3\" style=\"display: block\">Random article</a>\r\n        <a routerLink='articles/All' class=\"link-light m-3\" style=\"display: block\">All articles</a>\r\n        <a routerLink='articles/My' class=\"link-light m-3\" style=\"display: block\">My articles</a>\r\n        <a *ngIf=\"userInfo?.admin\" routerLink='articles/Moderation' class=\"link-light m-3\" style=\"display: block\">Moderation</a>\r\n        <a *ngIf=\"userInfo?.admin\" routerLink='articles/Archive' class=\"link-light m-3\" style=\"display: block\">Archive</a>\r\n        <a *ngIf=\"userInfo?.admin\" routerLink='articles/Drafts' class=\"link-light m-3\" style=\"display: block\">Drafts</a>\r\n        <a routerLink='article/About' class=\"link-light m-3\" style=\"display: block\">About investigations</a>\r\n    </div>\r\n    <div style=\"background: white; grid-area: workArea; position: relative\">\r\n        <router-outlet></router-outlet>\r\n    </div>\r\n\r\n    <div style=\"position: fixed\">\r\n        <ng-template component-container style=\"position: fixed\"></ng-template>\r\n    </div>\r\n\r\n</div>\r\n\r\n\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"names":["BehaviorSubject","lastValueFrom","LoginService","constructor","http","name","signedIn","admin","getUserInfo","then","ui","userInfo","next","get","Logout","success","Login","emailOrName","password","isEmail","indexOf","post","UserName","Mail","i0","factory","providedIn","UserInfo","ViewContainerRef","LoginComponent","RegistrationComponent","ComponentContainerDirective","viewContainerRef","showLoginDialog","resultCallBack","login","createComponent","instance","result","subscribe","evt","clear","register","selectors","EventEmitter","loginService","ngOnInit","onOkButton","res","console","log","emit","loginFailed","onCancelButton","onRegisterButton","outputs","decls","vars","consts","template","ctx","eMail","Password","userName","registrationFailed","registrationError","errorDescription","CEditModel","CrittersWorld","CrittersWorldSerializer","WorldCangesType","CrittersView","CTimeController","ZeroTimeController","SandBoxCrittersEditController","CrittersEditController","SandboxComponent","router","world","zeroTimeController","SavePopup","LoadPopup","TestInit","setThisTimeAsZero","notifyAboutChanges","loaded","onSaveButton","savePopup","open","dialogsHost","onLoadButton","loadPopup","w","deserializeWorld","data","Clear","i","length","AddCell","resetModificationFlag","onNext","RunSerie","executed","getExitConfirmText","exitConfirmRequired","wasModified","viewQuery","provide","useClass","titles","saveName","selectedSave","ToSlotList","savePopupDisplayStyle","push","id","slot","t","onSlotSelect","undefined","close","onPopupOk","SaveWorld","worldTitle","s","cellsData","SerializeCells","newName","resultCallback","selectedLoad","loadPopupDisplayStyle","SandboxWorldTitleModel","StartpageComponent","ViewOnlyCrittersEditController","ArticleComponent","route","CellsFieldIsEmpy","article","params","routeParams","showAccessibleButtons","setInterval","editAvaible","authorName","ArticleStatus","draft","regected","includes","status","deleteAvaible","toArchiveAvaible","approved","deleteArticle","window","confirm","delete","navigateByUrl","toArchive","put","ContentToHTML","content","replace","features","ArticleModel","EditArticleComponent","location","setTimeout","isNew","OnSave","text","save","OnPublish","awaitingApproval","OnDelete","OnReject","OnApprove","Router","WikiComponent","keyPress","$event","request","code","OnSearch","onCreateArticle","navigateToArticleCreation"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}